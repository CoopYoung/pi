<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.79.1"><link rel=canonical type=text/html href=https://cloudmesh.github.io/pi/tutorial/><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel="shortcut icon" href=/pi/favicons/favicon.ico><link rel=apple-touch-icon href=/pi/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/pi/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/pi/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/pi/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/pi/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/pi/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/pi/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/pi/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/pi/favicons/android-192x192.png sizes=192x192><title>Tutorials | Cloudmesh Cluster Pi Planet</title><meta property="og:title" content="Tutorials"><meta property="og:description" content="A Docsy example site"><meta property="og:type" content="website"><meta property="og:url" content="https://cloudmesh.github.io/pi/tutorial/"><meta property="og:site_name" content="Cloudmesh Cluster Pi Planet"><meta itemprop=name content="Tutorials"><meta itemprop=description content="A Docsy example site"><meta name=twitter:card content="summary"><meta name=twitter:title content="Tutorials"><meta name=twitter:description content="A Docsy example site"><link rel=preload href=/pi/scss/main.min.4aec00cbc82dae02258a2ba135990358146339f666dc47346f0f1e49d7a6fa42.css as=style><link href=/pi/scss/main.min.4aec00cbc82dae02258a2ba135990358146339f666dc47346f0f1e49d7a6fa42.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script></head><body class="td-section td-blog"><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/pi/><span class=navbar-logo><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zM197.0804 232.033c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zM197.0839 232.0372c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zM197.0839 232.0372c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zM197.0804 177.6188c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zM197.0839 177.623c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zM197.0839 177.623c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zM197.5309 286.4723c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zM197.5344 286.4765c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zM197.5344 286.4765c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zM197.0804 340.5784c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zM197.0839 340.5826c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zM197.0839 340.5826c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="text-uppercase font-weight-bold">Cloudmesh Cluster Pi Planet</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/pi/about/><span>About</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/pi/docs/><span>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/pi/blog/><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/pi/community/><span>Community</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/pi/tutorial/><span class=active>Tutorials</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"></div><main class="col-12 col-md-9 col-xl-8 pl-md-5 pr-md-4" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This the multi-page printable view of this section.
<a href=# onclick="print();return false;">Click here to print</a>.</p><p><a href=/pi/tutorial/>Return to the regular view of this page</a>.</p></div><h1 class=title>Tutorials</h1><ul><li>1: <a href=#pg-03cb49c826ef4fa4c93d74e1dbc53e48>GitHub gh Command Line Interface</a></li><li>2: <a href=#pg-9a676feb682fc672b27b9b861fa517e2>Easy Raspberry PI Cluster Setup with Cloudmesh from MacOS</a></li><li>3: <a href=#pg-8d76ae8c6d1269970f077409f19f01e2>Easy Raspberry PI Cluster Setup with Cloudmesh SDCard Burner</a></li><li>4: <a href=#pg-2b1e5335b32ab7dc6a177dabd7edc467>Burning a set of Ubuntu Server Cards for Raspberry Pis with Internet Access</a></li><li>5: <a href=#pg-20addf5f1313d1459bd24fe54815c81f>Command cms</a></li><li>6: <a href=#pg-365942066084bc21f9d613f5a75c656b>Introduction to Docker</a></li><li>7: <a href=#pg-e366e3514fac18c1ed613e3a5cbad167>Tutorial Links</a></li><li>8: <a href=#pg-112a4df841cb55c94a6b183558c66221>Network Scanning Tutorial</a></li><li>9: <a href=#pg-38142d6afd1cbdafe9e93351683a6a9a>Port Forwarding Tutorial</a></li><li>10: <a href=#pg-058d31f1ad9ef18980f31316da5cffc8>Ubuntu on the Pi</a></li><li>11: <a href=#pg-8a03792772737c9fcda02ef45a778cc5>Example Tutorial</a></li><li>12: <a href=#pg-ceb51565fd88ed675bfb16975ffb3740></a></li><li>13: <a href=#pg-c04d28bfcad1263d749a359404a04ae8></a></li><li>14: <a href=#pg-1a45a43a3ebb5eeedf69b9df992bf72b></a></li><li>15: <a href=#pg-da3d90228ab33c3a8e7cb7bc019b2693></a></li></ul><div class=content><p>This is the <strong>blog</strong> section. It has two categories: News and Releases.</p><p>Files in these directories will be listed in reverse chronological order.</p></div></div><div class=td-content><h1 id=pg-03cb49c826ef4fa4c93d74e1dbc53e48>1 - GitHub gh Command Line Interface</h1><div class=lead>A brief tutorial on the installation and usage of the GitHub gh CLI</div><div class="card rounded p-2 td-post-card mb-4 mt-4" style=max-width:610px><img class=card-img-top src=/pi/tutorial/gh-command/featured-image_hua13b09a952d27db01b9dc61a71d8a1d4_269789_600x300_fill_catmullrom_smart1_2.png width=600 height=300><div class="card-body px-0 pt-2 pb-0"><p class=card-text></p></div></div><p>Figure 1: GitHub Command gh.</p><div class="pageinfo pageinfo-primary"><p>GitHub provides an extended gh commandline tool that allow easy interaction of
forking repositories directly from github. IT also provides additional fimctionality
to interact with other advanced features that are typically not provided in the git command tool.</p><p><strong>Learning Objectives</strong></p><ul><li>Learn how to install the gh command</li><li>Learn how to use the gh command</li></ul><p><strong>Topics covered</strong></p><div class=toc><nav id=TableOfContents><ul><li><a href=#1-introduction>1. Introduction</a></li><li><a href=#2-installing-github-gh-command>2. Installing GitHub gh command</a></li><li><a href=#3-logging-in-with-github-gh-command>3. Logging in with GitHub gh Command</a><ul><li><a href=#31-adding-additional-keys>3.1 Adding Additional Keys</a></li></ul></li><li><a href=#4-forking>4. Forking</a></li><li><a href=#5-pull-requests>5. Pull Requests</a></li><li><a href=#6-managing-issues-with-github-gh-command>6. Managing Issues with GitHub gh Command</a></li><li><a href=#7-manual-pages>7. Manual Pages</a><ul><li><a href=#71-gh>7.1 gh</a></li><li><a href=#72-list-of-man-pages>7.2 List of Man Pages</a></li></ul></li><li><a href=#7-conclusion>7. Conclusion</a></li></ul></nav></div></div><h2 id=1-introduction>1. Introduction</h2><p>The new GitHub <code>gh</code> command allows GitHub users to work from the terminal of
their machine without having to visit the web browser GUI to manage things like
issues, PRs, and forking. We will show you what features it provides and how to
use it. The <code>gh</code> command provides useful features that is not provided by the `git
commandline tool.</p><h2 id=2-installing-github-gh-command>2. Installing GitHub gh command</h2><p>Visit the GitHub CLI homepage at <a href=https://cli.github.com/>https://cli.github.com/</a> for installation
instructions. We recommend that you check out the source distribution because
We found that whne we did this tutorial not all features were included in the
brew instalation. We assume ths will cahnge over time and you may soon be able
to just use the bre install on LInux and MacOs.</p><p>On mac, you can use the following command with
<a href=https://brew.sh/>Brew</a>:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>brew install gh
</code></pre></div><p>For Windows useser, please follow the install instructions fro Winodws.</p><h2 id=3-logging-in-with-github-gh-command>3. Logging in with GitHub gh Command</h2><p>It is best practice to be using SSH-keys with GitHub. Create one if you have
not already with the following command:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>ssh-keygen
</code></pre></div><p>We recommend t use the the default location.</p><p>To authenticate with the GitHub <code>gh</code> comamand, run the following command. We have included
the answers to the interactive prompts used for this guide.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>gh auth login

What account <span style=color:#204a87;font-weight:700>do</span> you want to log into? GitHub.com
? What account <span style=color:#204a87;font-weight:700>do</span> you want to log into? GitHub.com
? What is your preferred protocol <span style=color:#204a87;font-weight:700>for</span> Git operations? SSH
? Upload your SSH public key to your GitHub account? ~/.ssh/id_rsa.pub
? How would you like to authenticate GitHub CLI? Login with a web browser

! First copy your one-time code: 1234-1A11
- Press Enter to open github.com in your browser...
</code></pre></div><h3 id=31-adding-additional-keys>3.1 Adding Additional Keys</h3><p>IN acse you work with multiple computers it is advisable to add your keys from these
machines also. We demonstarte the interaction to upload the key from a new machine.</p><pre><code>newmachine$ gh ssh-key add ~/.ssh/id_rsa.pub 
Error: insufficient OAuth scopes to list SSH keys
Run the following to grant scopes: gh auth refresh -s write:public_key
newmachine$ gh auth refresh -s write:public_key

! First copy your one-time code: 4C2D-E896
- Press Enter to open github.com in your browser... 
✓ Authentication complete. Press Enter to continue...

newmachine$ gh ssh-key add ~/.ssh/id_rsa.pub   
✓ Public key added to your account
</code></pre><h2 id=4-forking>4. Forking</h2><p>We can easily create a fork of a repo with the following:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>gh repo fork
</code></pre></div><p>This is useful for when you do not have write access to the original repository.</p><h2 id=5-pull-requests>5. Pull Requests</h2><p>We can create a pull request easily as follows from a git repo:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>gh pr create
</code></pre></div><p>The command above will ask the user where to push the branch (if it does not
already exist on the remote). It will also offer the option to fork the initial
repository. You will want to do this if you do not have write access to the
original repo.</p><p>Once created, you may view the status of the PR with the following:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>gh pr status
</code></pre></div><p>Reviewers can checkout your pull request to verify changes as follows:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>gh pr checkout <span style=color:#ce5c00;font-weight:700>{</span>PR NUMBER<span style=color:#ce5c00;font-weight:700>}</span>
</code></pre></div><p>The reviewer can then approve the PR as follows:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>gh pr review --approve
</code></pre></div><p>Subsequently, the PR can be merged as follows:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>gh pr merge <span style=color:#ce5c00;font-weight:700>{</span>PR NUMBER<span style=color:#ce5c00;font-weight:700>}</span>
</code></pre></div><p>You may also list all pull requests with the following:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>gh pr list
</code></pre></div><p>Finally, PRs can be closed with</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>gh pr close <span style=color:#ce5c00;font-weight:700>{</span>PR NUMBER<span style=color:#ce5c00;font-weight:700>}</span>
</code></pre></div><h2 id=6-managing-issues-with-github-gh-command>6. Managing Issues with GitHub gh Command</h2><p>To create an issue, call the following:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>gh issue create --title<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;Bug 1&#34;</span> --body<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;description&#34;</span>
</code></pre></div><p>We can also check the status of issues relevant to use with:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>gh issue status
</code></pre></div><p>Alternatively, we may list all open issues.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>gh issue list
</code></pre></div><p>Finally, we may close issues with:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>gh issue close <span style=color:#ce5c00;font-weight:700>{</span>ISSUE NUMBER<span style=color:#ce5c00;font-weight:700>}</span>
</code></pre></div><h2 id=7-manual-pages>7. Manual Pages</h2><h3 id=71-gh>7.1 gh</h3><pre><code>gh(1)                                                                    gh(1)

NAME
       gh - GitHub CLI

SYNOPSIS
       gh   [flags]

DESCRIPTION
       Work seamlessly with GitHub from the command line.

OPTIONS
       --help[=false]      Show help for command

       --version[=false]      Show gh version

EXAMPLE
              $ gh issue create
              $ gh repo clone cli/cli
              $ gh pr checkout 321

SEE ALSO
       gh-alias(1),  gh-api(1),  gh-auth(1),  gh-completion(1),  gh-config(1),
       gh-gist(1),   gh-issue(1),   gh-pr(1),    gh-release(1),    gh-repo(1),
       gh-secret(1), gh-ssh-key(1)
</code></pre><h3 id=72-list-of-man-pages>7.2 List of Man Pages</h3><p>Tha manual pages are published at the <a href=https://cli.github.com/manual/>gh manual</a>.
For mor information you can also use the man command. A full list of manual pages includes:</p><ul><li>gh</li><li>gh-alias-delete</li><li>gh-alias-list</li><li>gh-alias-set</li><li>gh-alias</li><li>gh-api</li><li>gh-auth-login</li><li>gh-auth-logout</li><li>gh-auth-refresh</li><li>gh-auth-status</li><li>gh-auth</li><li>gh-completion</li><li>gh-config-get</li><li>gh-config-set</li><li>gh-config</li><li>gh-gist-clone</li><li>gh-gist-create</li><li>gh-gist-delete</li><li>gh-gist-edit</li><li>gh-gist-list</li><li>gh-gist-view</li><li>gh-gist</li><li>gh-issue-close</li><li>gh-issue-comment</li><li>gh-issue-create</li><li>gh-issue-delete</li><li>gh-issue-edit</li><li>gh-issue-list</li><li>gh-issue-reopen</li><li>gh-issue-status</li><li>gh-issue-view</li><li>gh-issue</li><li>gh-pr-checkout</li><li>gh-pr-checks</li><li>gh-pr-close</li><li>gh-pr-comment</li><li>gh-pr-create</li><li>gh-pr-diff</li><li>gh-pr-edit</li><li>gh-pr-list</li><li>gh-pr-merge</li><li>gh-pr-ready</li><li>gh-pr-reopen</li><li>gh-pr-review</li><li>gh-pr-status</li><li>gh-pr-view</li><li>gh-pr</li><li>gh-release-create</li><li>gh-release-delete</li><li>gh-release-download</li><li>gh-release-list</li><li>gh-release-upload</li><li>gh-release-view</li><li>gh-release</li><li>gh-repo-clone</li><li>gh-repo-create</li><li>gh-repo-fork</li><li>gh-repo-view</li><li>gh-repo</li><li>gh-secret-list</li><li>gh-secret-remove</li><li>gh-secret-set</li><li>gh-secret</li><li>gh-ssh-key-add</li><li>gh-ssh-key-list</li><li>gh-ssh-key</li></ul><h2 id=7-conclusion>7. Conclusion</h2><p>There are many other commands for the GitHub CLI that can be found in the
<a href=https://cli.github.com/manual/>gh manual</a>, however we only include a select
number of relevant commands for this guide. The commands mentioned above serve
to familiarize the user with the GitHub CLI while also providing practical
usage.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-9a676feb682fc672b27b9b861fa517e2>2 - Easy Raspberry PI Cluster Setup with Cloudmesh from MacOS</h1><div class=lead>Set up many SD Cards directly from MacS that are preconfigured to create PI clusters.</div><div class="card rounded p-2 td-post-card mb-4 mt-4" style=max-width:610px><img class=card-img-top src=/pi/tutorial/sdcard-burn-pi-headless/featured-macpi_hu84c2e5801cfc6fecc98e8b82bcd39770_15267324_600x300_fill_catmullrom_smart1_2.png width=600 height=300><div class="card-body px-0 pt-2 pb-0"><p class=card-text></p></div></div><div class="pageinfo pageinfo-primary"><p>In this tutorial, we explain how to easily set up a cluster of Pis on a Mac
while burning preconfigured SD Cards. We assume you use an SD Card reader/writer that
is plugged into your manager PI that we configure initially with Pi Imager.</p><p><strong>Learning Objectives</strong></p><ul><li>Learn how to use cloudmesh burn to create many SD Cards for a cluster</li><li>Test the cluster after burning</li><li>Focus on the setup for a Mac</li></ul><p><strong>Topics covered</strong></p><div class=toc><nav id=TableOfContents><ul><li><a href=#1-introduction>1. Introduction</a></li><li><a href=#2-requirements>2. Requirements</a></li><li><a href=#3-the-goal>3. The Goal</a></li><li><a href=#4-set-up-the-cloudmesh-burn-program-on-your-mac>4. Set up the Cloudmesh burn program on your Mac</a></li><li><a href=#5-start-your-cluster-and-configure-it>5. Start your Cluster and Configure it</a></li><li><a href=#6-use-your-cluster>6. Use your Cluster</a></li><li><a href=#8-accessing-the-workers-from-the-mac>8. Accessing the workers from the Mac</a></li><li><a href=#7-more-information>7. More Information</a></li><li><a href=#acknowledgment>Acknowledgment</a></li><li><a href=#references>References</a></li></ul></nav></div></div><h2 id=1-introduction>1. Introduction</h2><p>Over time we have seen many efforts to create Clusters using Pi&rsquo;s as a
platform. There are many reasons for this. You have full control over the PIs,
you use an inexpensive platform, and you use a highly usable platform
and provides an enormous benefit to get educated about cluster computing in
general.</p><p>There are different methods of how to set up a cluster. This includes setups
that are known under the terms <em>headless</em>, <em>network booting</em>, and <em>booting from
SD Cards</em>. Each of the methods has its advantages and disadvantages. However,
the last method is most familiar to the users in the Pi community that come
from single Pis. While reviewing the many efforts that describe a cluster set up
most of them contain many complex steps that require a significant amount of
time as they are executed individually on these Pis. Even starting is
non-trivial as a network needs to be set up to access them.</p><p>Despite the much improved Pi imager and the availability of Pi bakery, the
process is still involved. So we started asking:</p><blockquote><p>Is it possible to develop a tool that is specifically targeted to burn
SDCards for the PIs in a cluster one at a time, so we can just plug
the cards in, and with minimal effort start the cluster that simply works?</p></blockquote><p>You are in luck, we have spent some time to develop such a tool and present it at
as part of <a href=https://piplanet.org>PiPlanet</a><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>
. No more
spending hours upon hours to replicate the steps, learn complex DevOps
tutorials, but instead get a cluster set up easily with just a few commands.</p><p>For this, we developed <code>cms burn</code> which is a program that you can execute
either on a &ldquo;manager&rdquo; Pi (or in a Linux or macOS computers) to burn cards for
your cluster.</p><p>We have set up on GitHub a comprehensive package that can be installed easily
we hope that it is useful to you. All of this is discussed in detail at the
<a href=https://github.com/cloudmesh/cloudmesh-pi-burn/blob/main/README.md>cloudmesh-pi-burn README</a><sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>.
There you can also find detailed instructions on how to use a Mac or Linux
computer to burn directly from them. To showcase to you how easy it is to use
we demonstrate here the setup of a cluster with five nodes.</p><h2 id=2-requirements>2. Requirements</h2><ul><li>5 Raspberry Pis</li><li>5 SD Cards</li><li>Network Switch (unmanaged or managed)</li><li>5 Ethernet Cables</li><li>Wifi Access</li><li>Monitor, Mouse, Keyboard (for desktop access on Pi)</li><li>1 SD Card Burner(s) (we recommend one that supports USB 3.0 speeds)</li><li>XCode and brew installed on the Mac</li><li>Software from Paragon that allows write access to ext4 from MacOS ($40)</li></ul><p>For a list of possible part choices, please see:</p><ul><li><a href=/pi/docs/hardware/parts/>Parts Choices</a><sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup></li></ul><h2 id=3-the-goal>3. The Goal</h2><p>We will be creating the following setup using <strong>5 Raspberry Pis</strong> (you need a
minimum of 2, but our method works also for larger numbers of PIs).
Consequentially, you will also need 5 SD cards for each of the 5 Pis.
You will also want a network switch (managed or unmanaged) with 5 ethernet
cables (one for each Pi).</p><p>Figure 1 shows our network configuration. From the five Raspberry Pis, one is
dedicated as a manager and four as workers. We use WiFi between the manager
PI to allow for you to set it up anywhere in your house or dorm (other
configurations are discussed in the
<a href=https://github.com/cloudmesh/cloudmesh-pi-burn/blob/main/README.md>README</a>).</p><p>We use an unmanaged network switch, where the manager and workers can
communicate locally with each other, and the manager provides
internet access to the workers via a bridge that we configure for you.</p><p><img src=https://github.com/cloudmesh/cloudmesh-pi-burn/raw/main/images/network-bridge.png alt></p><p>Figure 1: Pi Cluster setup with bridge network</p><h2 id=4-set-up-the-cloudmesh-burn-program-on-your-mac>4. Set up the Cloudmesh burn program on your Mac</h2><p>On your Mac do the following. First set up a Python <code>venv</code>:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>user@mac $ python3 -m venv ~/ENV3
user@mac $ <span style=color:#204a87>source</span> ~/ENV3/bin/activate
</code></pre></div><p>Next, install the cloudmesh cluster generation tools and start the burn process</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#ce5c00;font-weight:700>(</span>ENV3<span style=color:#ce5c00;font-weight:700>)</span> user@mac $ pip install cloudmesh-pi-cluster
<span style=color:#ce5c00;font-weight:700>(</span>ENV3<span style=color:#ce5c00;font-weight:700>)</span> user@mac $ cms <span style=color:#204a87>help</span>
<span style=color:#ce5c00;font-weight:700>(</span>ENV3<span style=color:#ce5c00;font-weight:700>)</span> user@mac $ cms burn info 
<span style=color:#ce5c00;font-weight:700>(</span>ENV3<span style=color:#ce5c00;font-weight:700>)</span> user@mac $ cms burn cluster --device<span style=color:#ce5c00;font-weight:700>=</span>/dev/disk2 --hostname<span style=color:#ce5c00;font-weight:700>=</span>red,red01,red02 --ssid<span style=color:#ce5c00;font-weight:700>=</span>myssid -y -g
</code></pre></div><p>Fill out the passwords and plug in the cards as requested.</p><h2 id=5-start-your-cluster-and-configure-it>5. Start your Cluster and Configure it</h2><p>After the burn is completed, plug them in your PIs and switch them on. On you
Mac execute the ssh command to log into your manager we called red. Worker nodes
have a number in them.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#ce5c00;font-weight:700>(</span>ENV3<span style=color:#ce5c00;font-weight:700>)</span> user@mac $ ssh pi@red.local  
</code></pre></div><p>This will take a while as the file system on the SD Cards need to be installed and
configurations such as country, ssh, and wifi need to be activated.</p><p>Once you are in the manager install cloudmesh cluster software also in it (we
could have done this automatically, but decided to leave that part of the
process up to you in case you to give you maximum flexibility).</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>pi@red:~ $ curl -Ls http://cloudmesh.github.io/get/pi <span style=color:#000;font-weight:700>|</span> sh -
</code></pre></div><p>.. after lots of log messages, you will see &mldr;</p><pre><code>#################################################
# Install Completed                             #
#################################################
Time to update and upgarde: 339 s
Time to install the venv:   22 s
Time to install cloudmesh:  185 s
Time for total install:     546 s
Time to install: 546 s
#################################################
Please activate with
    source ~/ENV3/bin/activate
    
</code></pre><p>Now just reboot with</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>pi@red:~ $ sudo reboot
</code></pre></div><h2 id=6-use-your-cluster>6. Use your Cluster</h2><p>On your Mac say again</p><pre><code>user@mac $ ssh pi@red.local
</code></pre><p>Once you are logged in in your manager named red.local on the network execute a
command to see if things work. Use our temperature monitor to get the
temperature from all PIs. This will allow you to see if they are all working.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#ce5c00;font-weight:700>(</span>ENV3<span style=color:#ce5c00;font-weight:700>)</span> pi@red:~ $ cms pi temp red01,red02

pi temp red01,red02
+--------+--------+-------+----------------------------+
<span style=color:#000;font-weight:700>|</span> host   <span style=color:#000;font-weight:700>|</span>    cpu <span style=color:#000;font-weight:700>|</span>   gpu <span style=color:#000;font-weight:700>|</span> date                       <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span>--------+--------+-------+----------------------------<span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span> red01  <span style=color:#000;font-weight:700>|</span> 45.277 <span style=color:#000;font-weight:700>|</span>  45.2 <span style=color:#000;font-weight:700>|</span> 2021-02-23 22:13:11.788430 <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span> red02  <span style=color:#000;font-weight:700>|</span> 42.842 <span style=color:#000;font-weight:700>|</span>  42.8 <span style=color:#000;font-weight:700>|</span> 2021-02-23 22:13:11.941566 <span style=color:#000;font-weight:700>|</span>
+--------+--------+-------+----------------------------+
</code></pre></div><h2 id=8-accessing-the-workers-from-the-mac>8. Accessing the workers from the Mac</h2><p>To makes it even more convenient, we want to access the workers directly from the
Mac. For this reason, we have designed a tunnel command that makes the setup real easy.
You call it on the manager node as follows</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#ce5c00;font-weight:700>(</span>ENV3<span style=color:#ce5c00;font-weight:700>)</span> pi@red:~ $ cms host setup red00<span style=color:#ce5c00;font-weight:700>[</span>1-2<span style=color:#ce5c00;font-weight:700>]</span> user@mac.local 
</code></pre></div><p>This will print out a file that you need to copy it into to your
<code>~/.ssh/config</code> file on your Mac. We will soon have a command that will add
them for you without using an editor.</p><pre><code># ----------------------------------------------------------------------
# copy to ~/.ssh/config on remote host (i.e laptop)
# ----------------------------------------------------------------------

Host red
     HostName red.local
     User pi

Host red001
     HostName red.local
     User pi
     Port 8001

Host red002
     HostName red.local
     User pi
     Port 8002
</code></pre><p>Now you are all set to access the workers on your Mac. Try it out with
the temperature program</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#ce5c00;font-weight:700>(</span>ENV3<span style=color:#ce5c00;font-weight:700>)</span> user@mac:~ $ cms pi temp red,red00<span style=color:#ce5c00;font-weight:700>[</span>1-2<span style=color:#ce5c00;font-weight:700>]</span>              

+--------+--------+-------+----------------------------+
<span style=color:#000;font-weight:700>|</span> host   <span style=color:#000;font-weight:700>|</span>    cpu <span style=color:#000;font-weight:700>|</span>   gpu <span style=color:#000;font-weight:700>|</span> date                       <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span>--------+--------+-------+----------------------------<span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span> red    <span style=color:#000;font-weight:700>|</span> 50.147 <span style=color:#000;font-weight:700>|</span>  50.1 <span style=color:#000;font-weight:700>|</span> 2021-02-18 21:10:05.942494 <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span> red001 <span style=color:#000;font-weight:700>|</span> 51.608 <span style=color:#000;font-weight:700>|</span>  51.6 <span style=color:#000;font-weight:700>|</span> 2021-02-18 21:10:06.153189 <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span> red002 <span style=color:#000;font-weight:700>|</span> 45.764 <span style=color:#000;font-weight:700>|</span>  45.7 <span style=color:#000;font-weight:700>|</span> 2021-02-18 21:10:06.163067 <span style=color:#000;font-weight:700>|</span>
+--------+--------+-------+----------------------------+
</code></pre></div><h2 id=7-more-information>7. More Information</h2><p>As we use ssh keys to authenticate between manager and workers, you can
directly log into the workers from the manager.</p><p>More details are provided on our web pages at</p><ul><li><a href=https://github.com/cloudmesh/cloudmesh-pi-burn/blob/main/README.md>README</a></li><li><a href=https://piplanet.org>piplanet.org</a></li></ul><p>Other cloudmesh components are discussed in the <a href=https://cloudmesh.github.io/cloudmesh-manual/>cloudmesh manual</a><sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup>.</p><h2 id=acknowledgment>Acknowledgment</h2><p>We would like to thank the following community members for testing the recent
versions:
Venkata Sai Dhakshesh Kolli,
Rama Asuri,
Adam Ratzman.
Previous versions of the software obtained code contributions from
Sub Raizada,
Jonathan Branam,
Fugang Wnag,
Anand Sriramulu,
Akshay Kowshik.</p><h2 id=references>References</h2><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p>PiPlanet Web Site, <a href=https://piplanet.org>https://piplanet.org</a> <a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2 role=doc-endnote><p>Cloudmesh pi burn README, <a href=https://github.com/cloudmesh/cloudmesh-pi-burn/blob/main/README.md>https://github.com/cloudmesh/cloudmesh-pi-burn/blob/main/README.md</a> <a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3 role=doc-endnote><p>Parts for building clusters, <a href=https://cloudmesh.github.io/pi/docs/hardware/parts/>https://cloudmesh.github.io/pi/docs/hardware/parts/</a> <a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4 role=doc-endnote><p>Cloudmesh Manual, <a href=https://cloudmesh.github.io/cloudmesh-manual/>https://cloudmesh.github.io/cloudmesh-manual/</a> <a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section></div><div class=td-content style=page-break-before:always><h1 id=pg-8d76ae8c6d1269970f077409f19f01e2>3 - Easy Raspberry PI Cluster Setup with Cloudmesh SDCard Burner</h1><div class=lead>Set up many SD Cards that are preconfigured to create PI clusters.</div><script async defer src=https://buttons.github.io/buttons.js></script><p><a class=github-button href=https://github.com/cloudmesh/cloudmesh-pi-burn data-icon=octicon-star aria-label="Star cloudmesh/cloudmesh-pi-burn on GitHub">Star</a></p><div class="card rounded p-2 td-post-card mb-4 mt-4" style=max-width:610px><img class=card-img-top src=/pi/tutorial/sdcard-burn-pi-as-burner/featured-many-pis_hu36e8565082faa261af0bfcaa321767f3_2304706_600x300_fill_q75_catmullrom_smart1.jpg width=600 height=300><div class="card-body px-0 pt-2 pb-0"><p class=card-text></p></div></div><div class="pageinfo pageinfo-primary"><p>In this tutorial, we explain how to easily set up a cluster of Pis
while burning preconfigured SD Cards. We assume you use an SD Card reader/writer that
is plugged into your manager PI that we configure initially with Pi Imager.</p><p><strong>Learning Objectives</strong></p><ul><li>Learn how to use cloudmesh burn to create many SD Cards for a cluster</li><li>Test the cluster after burning</li></ul><p><strong>Topics covered</strong></p><div class=toc><nav id=TableOfContents><ul><li><a href=#1-introduction>1. Introduction</a></li><li><a href=#2-requirements>2. Requirements</a></li><li><a href=#3-the-goal>3. The Goal</a></li><li><a href=#4-steps>4. Steps</a><ul><li><a href=#step-1-burning-and-configuring-the-manager>Step 1. Burning and Configuring the Manager</a></li><li><a href=#step-2-create-an-ssh-key>Step 2. Create an SSH key</a></li><li><a href=#step-3-installing-cloudmesh>Step 3. Installing Cloudmesh</a></li><li><a href=#step-4-creating-our-cluster-inventory>Step 4. Creating our Cluster Inventory</a></li><li><a href=#step-5-burning-the-sd-cards>Step 5. Burning the SD Cards</a></li><li><a href=#step-6-verifying-the-workers>Step 6. Verifying the Workers</a></li></ul></li><li><a href=#5-using-the-pis>5. Using the Pis</a></li><li><a href=#acknowledgment>Acknowledgment</a></li><li><a href=#references>References</a></li></ul></nav></div></div><h2 id=1-introduction>1. Introduction</h2><p>Over time we have seen many efforts to create Clusters using Pi&rsquo;s as a
platform. There are many reasons for this. You have full control over the PIs,
you use an inexpensive platform, and you use a highly usable platform
and provides an enormous benefit to get educated about cluster computing in
general.</p><p>There are different methods of how to set up a cluster. This includes setups
that are known under the terms <em>headless</em>, <em>network booting</em>, and <em>booting from
SD Cards</em>. Each of the methods has its advantages and disadvantages. However,
the last method is most familiar to the users in the Pi community that come
from single Pis. While reviewing the many efforts that describe a cluster set up
most of them contain many complex steps that require a significant amount of
time as they are executed individually on these Pis. Even starting is
non-trivial as a network needs to be set up to access them.</p><p>Despite the much improved Pi imager and the availability of Pi bakery, the
process is still involved. So we started asking:</p><blockquote><p>Is it possible to develop a tool that is specifically targeted to burn
SDCards for the PIs in a cluster one at a time, so we can just plug
the cards in, and with minimal effort start the cluster that simply works?</p></blockquote><p>You are in luck, we have spent some time to develop such a tool and present it at
as part of <a href=https://piplanet.org>PiPlanet</a><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>
. No more
spending hours upon hours to replicate the steps, learn complex DevOps
tutorials, but instead get a cluster set up easily with just a few commands.</p><p>For this, we developed <code>cms burn</code> which is a program that you can execute
either on a &ldquo;manager&rdquo; Pi (or in a Linux or macOS computers) to burn cards for
your cluster.</p><p>We have set up on GitHub a comprehensive package that can be installed easily
we hope that it is useful to you. All of this is discussed in detail at the
<a href=https://github.com/cloudmesh/cloudmesh-pi-burn/blob/main/README.md>cloudmesh-pi-burn README</a><sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>.
There you can also find detailed instructions on how to use a Mac or Linux
computer to burn directly from them. To showcase to you how easy it is to use
we demonstrate here the setup of a cluster with five nodes.</p><h2 id=2-requirements>2. Requirements</h2><ul><li>5 Raspberry Pis</li><li>5 SD Cards</li><li>Network Switch (unmanaged or managed)</li><li>5 Ethernet Cables</li><li>Wifi Access</li><li>Monitor, Mouse, Keyboard (for desktop access on Pi)</li><li>1 SD Card Burner(s) (we recommend one that supports USB 3.0 speeds)</li></ul><p>For a list of possible part choices, please see:</p><ul><li><a href=/pi/docs/hardware/parts/>Parts Choices</a><sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup></li></ul><h2 id=3-the-goal>3. The Goal</h2><p>We will be creating the following setup using <strong>5 Raspberry Pis</strong> (you need a
minimum of 2, but our method works also for larger numbers of PIs).
Consequentially, you will also need 5 SD cards for each of the 5 Pis.
You will also want a network switch (managed or unmanaged) with 5 ethernet
cables (one for each Pi).</p><p>Figure 1 shows our network configuration. From the five Raspberry Pis, one is
dedicated as a manager and four as workers. We use WiFi between the manager
PI to allow for you to set it up anywhere in your house or dorm (other
configurations are discussed in the
<a href=https://github.com/cloudmesh/cloudmesh-pi-burn/blob/main/README.md>README</a>).</p><p>We use an unmanaged network switch, where the manager and workers can
communicate locally with each other, and the manager provides
internet access to the workers via a bridge that we configure for you.</p><p><img src=https://github.com/cloudmesh/cloudmesh-pi-burn/raw/main/images/network-bridge.png alt></p><p>Figure 1: Pi Cluster setup with bridge network</p><h2 id=4-steps>4. Steps</h2><h3 id=step-1-burning-and-configuring-the-manager>Step 1. Burning and Configuring the Manager</h3><p>Choose one SD card for the manager (yellow card in Figure 1). Using your
laptop, download the <a href=https://www.raspberrypi.org/software/>Raspberry Pi Imager</a>
RaspberryOS desktop version. This is the recommended version for PIs at this time.
We use Pi Imager to burn our
manager. Note this is the only time we will need to use PI Imager.</p><center><img src=imager-with-options.png width=50%><p>Figure 2. Pi Imager</p></center><p>Write to your SD card. Once the process is complete and verified, insert the SD Card into your manager
Pi. Connect your manager to the peripherals (keyboard, mouse, monitor, power). Switch on the power.</p><blockquote><p>Note you may also use a headless setup. See <a href=https://www.raspberrypi.org/documentation/configuration/wireless/headless.md>here</a> for more information on headless setups.</p></blockquote><p>Next, we walk through the initial setup process of the Pi and configure the settings in
accordance with your situation. We have provided screenshots in Figures 3 - 8
that depicts this process.</p><center><img src=setup1.png width=50%><p>Figure 3. After successfully booting the Pi will display the Welcome Page.</p></center><center><img src=setup2.png width=50%><p>Figure 4. Set country, language, and timezone. Additionally, you must use the
proper keyboard layout. For the US enable &ldquo;Use US Keyboard&rdquo;.</p></center><center><img src=setup3.png width=50%><p>Figure 5. Set your password and use a strong password.</p></center><center><img src=setup4.png width=50%><p>Figure 6. Choose your Wifi network and configure it while adding the password.</p></center><center><img src=setup5.png width=50%><p>Figure 7. The setup prompt will ask you if you wish to update the software. You
may do so, or you may skip, as the installation script that we will run will do
this for you.</p></center><center><img src=setup6.png width=50%><p>Figure 8. Setup is now complete.</p></center><h3 id=step-2-create-an-ssh-key>Step 2. Create an SSH key</h3><p>As we will be using keys to authenticate with the workers, you need to create
one in a terminal with</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>pi@managerpi:~ $ ssh-keygen
</code></pre></div><p>It will ask you for a location, choose the default. It will also ask you for a
passphrase. Please use a strong one and do not make it the same as the password
for your manager PI.</p><h3 id=step-3-installing-cloudmesh>Step 3. Installing Cloudmesh</h3><p>Now let us install cloudmesh burn, which allows us to burn preconfigured SD
Cards for clusters easily. Open a new terminal window and run the following
command. To make the installation and needed updates to your PI simple, we have
provided a one-line install script that you can run via curl:</p><pre><code>pi@managerpi:~ $ curl -Ls http://cloudmesh.github.io/get/pi | sh -
</code></pre><p>This will set up a python venv on your computer manager Pi. It may take 5-7
minutes as it will also update your Pi and install all other requirements.</p><p>You will want to reboot your Pi after this.</p><pre><code>pi@managerpi:~ $ sudo reboot
</code></pre><h3 id=step-4-creating-our-cluster-inventory>Step 4. Creating our Cluster Inventory</h3><p>To manage information about our cluster, we will use a Cloudmesh Inventory.
This will allow you to easily track and manage the configuration of your
cluster nodes. Let us create an inventory for our cluster as follows:</p><pre><code>(ENV3) pi@managerpi:~ $ cms inventory create --hostnames=&quot;managerpi,worker00[1-4]&quot; --ip=&quot;10.1.1.[1-5]&quot;  --inventory=cluster.yaml latest-lite
</code></pre><p>You can inspect the inventory with the list command as shown next. Double-check
if it looks like:</p><pre><code>(ENV3) pi@managerpi:~ $ cms inventory list --inventory=cluster.yaml

+-----------+-----------+------+-------------+---------+-------+---------+----------+----------+-----+---------+--------+---------+-------------+-------------------+----------+
| host      | name      | type | tag         | cluster | label | service | services | ip       | dns | project | owners | comment | description | keyfile           | status   |
+-----------+-----------+------+-------------+---------+-------+---------+----------+----------+-----+---------+--------+---------+-------------+-------------------+----------+
| managerpi | managerpi |      | latest-lite | cluster |       | manager |          | 10.1.1.1 |     |         |        |         |             | ~/.ssh/id_rsa.pub | inactive |
| worker001 | worker001 |      | latest-lite | cluster |       | worker  |          | 10.1.1.2 |     |         |        |         |             | ~/.ssh/id_rsa.pub | inactive |
| worker002 | worker002 |      | latest-lite | cluster |       | worker  |          | 10.1.1.3 |     |         |        |         |             | ~/.ssh/id_rsa.pub | inactive |
| worker003 | worker003 |      | latest-lite | cluster |       | worker  |          | 10.1.1.4 |     |         |        |         |             | ~/.ssh/id_rsa.pub | inactive |
| worker004 | worker004 |      | latest-lite | cluster |       | worker  |          | 10.1.1.5 |     |         |        |         |             | ~/.ssh/id_rsa.pub | inactive |
+-----------+-----------+------+-------------+---------+-------+---------+----------+----------+-----+---------+--------+---------+-------------+-------------------+----------+
</code></pre><h3 id=step-5-burning-the-sd-cards>Step 5. Burning the SD Cards</h3><p>We can now begin burning.</p><p>You can now plug in your SD Card reader/writer into the <code>managerpi</code>. Ensure you
have also inserted an SD card into your reader/writer. <em>Warning</em> this SD Card
will be formatted, thus all content will be deleted and lost.</p><p>Verify your device is detected with the following command:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#ce5c00;font-weight:700>(</span>ENV3<span style=color:#ce5c00;font-weight:700>)</span> pi@managerpi:~ $ cms burn info

<span style=color:#8f5902;font-style:italic># ----------------------------------------------------------------------</span>
<span style=color:#8f5902;font-style:italic># SD Cards Found</span>
<span style=color:#8f5902;font-style:italic># ----------------------------------------------------------------------</span>

+----------+------------------------+-------------+------------------+--------------+------------+---------+----------+-------------+-------------+
<span style=color:#000;font-weight:700>|</span> Path     <span style=color:#000;font-weight:700>|</span> Info                   <span style=color:#000;font-weight:700>|</span> Formatted   <span style=color:#000;font-weight:700>|</span> Size             <span style=color:#000;font-weight:700>|</span> Plugged-in   <span style=color:#000;font-weight:700>|</span> Readable   <span style=color:#000;font-weight:700>|</span> Empty   <span style=color:#000;font-weight:700>|</span> Access   <span style=color:#000;font-weight:700>|</span> Removable   <span style=color:#000;font-weight:700>|</span> Writeable   <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span>----------+------------------------+-------------+------------------+--------------+------------+---------+----------+-------------+-------------<span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span> /dev/sdb <span style=color:#000;font-weight:700>|</span> Generic STORAGE DEVICE <span style=color:#000;font-weight:700>|</span> True        <span style=color:#000;font-weight:700>|</span> 64.1 GB/59.7 GiB <span style=color:#000;font-weight:700>|</span> True         <span style=color:#000;font-weight:700>|</span> True       <span style=color:#000;font-weight:700>|</span> False   <span style=color:#000;font-weight:700>|</span> True     <span style=color:#000;font-weight:700>|</span> True        <span style=color:#000;font-weight:700>|</span> True        <span style=color:#000;font-weight:700>|</span>
+----------+------------------------+-------------+------------------+--------------+------------+---------+----------+-------------+-------------+
</code></pre></div><blockquote><p>Note we omit some information from <code>cms burn info</code> for simplicity</p></blockquote><p>From <code>cms burn info</code>, we see our device is <code>/dev/sdb</code>. Note this may be
different on your Pi. If your device is not showing up, ensure you have an SD
Card inserted, and try unplugging and plugging the SD Card reader/writer.</p><p>We can now begin burning our cluster. The following command will download the
necessary Raspberry Pi OS images, configure <code>manager</code> as a Wifi bridge to
provide internet access to workers and burn the SD Cards. Note you will need
to cycle SD cards after each burn.</p><pre><code>(ENV3) pi@managerpi:~ $ cms burn create --inventory=cluster.yaml --device=/dev/sdb --name=managerpi,worker00[1-4]

Manager hostname is the same as this system's hostname. Is this intended? (Y/n) Y
Do you wish to configure this system as a WiFi bridge? A restart is required after this command terminates (Y/n) Y

</code></pre><blockquote><p>Some output of cms burn has been omitted for simplicity. Note that image
extraction may take more than a minute.</p></blockquote><p>As each SD Card is burned, <code>cms burn</code> will prompt you to insert a new SD Card
to be burned.</p><p>After all the cards are burned, plug them into your worker Pis and boot. Reboot the
managerpi.</p><pre><code>(ENV3) pi@managerpi:~ $ sudo reboot
</code></pre><h3 id=step-6-verifying-the-workers>Step 6. Verifying the Workers</h3><p>Once your workers are booted, you can verify the connection with the following
simple command. This command will return the temperature of the Pis.</p><pre><code>(ENV3) pi@managerpi:~ $ cms pi temp worker00[1-4]
pi temp worker00[1-4]
+-----------+--------+-------+----------------------------+
| host      |    cpu |   gpu | date                       |
|-----------+--------+-------+----------------------------|
| worker001 | 36.511 |  36.5 | 2021-02-22 00:06:48.873427 |
| worker002 | 36.998 |  37   | 2021-02-22 00:06:48.813539 |
| worker003 | 36.998 |  37   | 2021-02-22 00:06:48.843944 |
| worker004 | 36.498 |  36   | 2021-02-22 00:06:48.843956 |
+-----------+--------+-------+----------------------------+
</code></pre><h2 id=5-using-the-pis>5. Using the Pis</h2><p>As we use ssh keys to authenticate between manager and workers, you can
directly log into the workers from the manager.</p><p>More details are provided on our web pages at</p><ul><li><a href=https://github.com/cloudmesh/cloudmesh-pi-burn/blob/main/README.md>README</a></li><li><a href=https://piplanet.org>piplanet.org</a></li></ul><p>Other cloudmesh components are discussed in the <a href=https://cloudmesh.github.io/cloudmesh-manual/>cloudmesh manual</a><sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup>.</p><h2 id=acknowledgment>Acknowledgment</h2><p>We would like to thank the following community members for testing the recent
versions:
Venkata Sai Dhakshesh Kolli,
Rama Asuri,
Adam Ratzman.
Previous versions of the software obtained code contributions from
Sub Raizada,
Jonathan Branam,
Fugang Wnag,
Anand Sriramulu,
Akshay Kowshik.</p><h2 id=references>References</h2><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p>PiPlanet Web Site, <a href=https://piplanet.org>https://piplanet.org</a> <a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2 role=doc-endnote><p>Cloudmesh pi burn README, <a href=https://github.com/cloudmesh/cloudmesh-pi-burn/blob/main/README.md>https://github.com/cloudmesh/cloudmesh-pi-burn/blob/main/README.md</a> <a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3 role=doc-endnote><p>Parts for building clusters, <a href=https://cloudmesh.github.io/pi/docs/hardware/parts/>https://cloudmesh.github.io/pi/docs/hardware/parts/</a> <a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4 role=doc-endnote><p>Cloudmesh Manual, <a href=https://cloudmesh.github.io/cloudmesh-manual/>https://cloudmesh.github.io/cloudmesh-manual/</a> <a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section></div><div class=td-content style=page-break-before:always><h1 id=pg-2b1e5335b32ab7dc6a177dabd7edc467>4 - Burning a set of Ubuntu Server Cards for Raspberry Pis with Internet Access</h1><div class=lead>A comprehensive tutorial of burning an Ubuntu cluster with internet access</div><div class="card rounded p-2 td-post-card mb-4 mt-4" style=max-width:610px><img class=card-img-top src=/pi/tutorial/ubuntu-burn/featured-image_hub225d8e28e0c8cb78ba75e0b37fb6163_234635_600x300_fill_catmullrom_smart1_2.png width=600 height=300></div><div class="pageinfo pageinfo-primary"><p>In this tutorial, we explain how to easily set up a cluster of Pis with pre-configured Ubuntu cards
initialized with custom cloud-init configurations.</p><p><strong>Learning Objectives</strong></p><ul><li>Learn how to use cloudmesh-burn to create an ubuntu cluster</li><li>Test the cluster after burning</li></ul><p><strong>Topics covered</strong></p><div class=toc><nav id=TableOfContents><ul><li><a href=#1-introduction>1. Introduction</a></li><li><a href=#2-pre-requisites>2. Pre-requisites</a></li><li><a href=#3-installing-cloudmesh-and-setup>3. Installing cloudmesh and Setup</a></li><li><a href=#4-writing-our-cluster-configuration>4. Writing our cluster configuration</a></li><li><a href=#5-burning-the-cluster>5. Burning the Cluster</a></li><li><a href=#6-burn-verification>6. Burn Verification</a></li></ul></nav></div></div><h2 id=1-introduction>1. Introduction</h2><p>Cloud-init provides powerful tools for configuring an Ubuntu Server. It allows users to configure network
information, add authorized keys, run commands on boot, and other useful tasks to set up the operating system. While cloud-init is a very
powerful tool, it requires knowledge to use it properly and therefore has a high learning curve when it comes to cluster-specific tasks such as using user data and network configurations
to get a cluster operational.</p><p>For this reason, we provide a simple set of commands to not only burn SD Cards with ubuntu server but to augment them with configurations for cloud-init
to set up a cluster correctly.</p><p>In this tutorial, we will burn a cluster of Raspberry Pis with Ubuntu Server per a user-friendly configuration.
This cluster will have wifi access from the manager, and the manager will act as a router for the workers (in that all
internet traffic is routed through the manager). This type of setup is useful for those with restricted internet access
(no access to modem), especially those that are required to register the MAC addresses of their devices. With a cluster
of 10 or more nodes, this can be quite tedious to do.</p><h2 id=2-pre-requisites>2. Pre-requisites</h2><ul><li>Computer/Laptop with MacOS or Linux. (Windows not supported yet)</li><li><code>python3 --version</code> > 3.8</li><li>4 Raspberry Pis and 4 SD Cards with power cables</li><li>WiFi SSID and Password</li><li>4 Ethernet Cables</li><li>An (un)managed ethernet switch</li></ul><h2 id=3-installing-cloudmesh-and-setup>3. Installing cloudmesh and Setup</h2><p>It is always wise to create virtual environments when you do not envision needing a python package consistently. Let us
create one for this tutorial.</p><p>On your Linux/Mac, open a new terminal.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>you@yourlaptop$ python3 -m venv ~/CLOUDMESH
</code></pre></div><p>The above will create a new python virtual environment. Activate it with the following.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>you@yourlaptop$ <span style=color:#204a87>source</span> ~/CLOUDMESH/bin/activate
</code></pre></div><p>Verify your <code>python</code> and <code>pip</code> are correct</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>you@yourlaptop$ which python
~/CLOUDMESH/bin/python

you@yourlaptop$ which pip
~/CLOUDMESH/bin/pip
</code></pre></div><p>Update <code>pip</code>.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>you@yourlaptop$ pip install --upgrade pip
</code></pre></div><p>Install <code>cloudmesh-installer</code></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>you@yourlaptop$ pip install cloudmesh-installer
</code></pre></div><p>Create a new directory <code>~/cm</code> and <code>cd</code> into it</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>you@yourlaptop$ mkdir ~/cm
you@yourlaptop$ <span style=color:#204a87>cd</span> ~/cm
</code></pre></div><p>Install the correct cloudmesh-repos with the following. In the future, we
will make this a PyPI package.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>you@yourlaptop$ cloudmesh-installer get pi
</code></pre></div><p>Because this is pre-release, we must use <code>origin/ubuntu</code> in <code>cloudmesh-pi-burn</code>.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>you@yourlaptop$ <span style=color:#204a87>cd</span> cloudmesh-pi-burn
you@yourlaptop$ git checkout ubuntu
</code></pre></div><p>Finally, ensure you have an RSA key pair in <code>~/.ssh</code>. You can create one as follows. Use the default location in <code>~/.ssh/id_rsa</code></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>you@yourlaptop$ ssh-keygen
</code></pre></div><h2 id=4-writing-our-cluster-configuration>4. Writing our cluster configuration</h2><p>Cloudmesh has a simple system for managing cluster configs. This system is a &ldquo;cloudmesh inventory&rdquo;.</p><p>We can first add a manager with cluster subnet IP <code>10.1.1.2</code></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>you@yourlaptop$ cms inventory add manager --service<span style=color:#ce5c00;font-weight:700>=</span>manager --ip<span style=color:#ce5c00;font-weight:700>=</span>10.1.1.2 --tag<span style=color:#ce5c00;font-weight:700>=</span>ubuntu-20.10-64-bit
you@yourlaptop$ cms inventory <span style=color:#204a87>set</span> manager services to bridge --listvalue
</code></pre></div><p>We can then add the workers</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>you@yourlaptop$ cms inventory add <span style=color:#4e9a06>&#34;worker00[1-3]&#34;</span> --service<span style=color:#ce5c00;font-weight:700>=</span>worker --ip<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;10.1.1.[3-5]&#34;</span> --router<span style=color:#ce5c00;font-weight:700>=</span>10.1.1.2 --tag<span style=color:#ce5c00;font-weight:700>=</span>ubuntu-20.10-64-bit
you@yourlaptop$ cms inventory <span style=color:#204a87>set</span> <span style=color:#4e9a06>&#34;worker00[1-3]&#34;</span> dns to <span style=color:#4e9a06>&#34;8.8.8.8,8.8.4.4&#34;</span> --listvalue
</code></pre></div><p>Our cluster configuration is now complete. You may run the following to list your configuration. We include ours for a sanity check:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>you@yourlaptop$ cms inventory list
+-----------+------+------+---------------------+---------+-------+---------+------------+----------+------------------------+----------+---------+--------+---------+-------------+-------------------+----------+
<span style=color:#000;font-weight:700>|</span> host      <span style=color:#000;font-weight:700>|</span> name <span style=color:#000;font-weight:700>|</span> <span style=color:#204a87>type</span> <span style=color:#000;font-weight:700>|</span> tag                 <span style=color:#000;font-weight:700>|</span> cluster <span style=color:#000;font-weight:700>|</span> label <span style=color:#000;font-weight:700>|</span> service <span style=color:#000;font-weight:700>|</span> services   <span style=color:#000;font-weight:700>|</span> ip       <span style=color:#000;font-weight:700>|</span> dns                    <span style=color:#000;font-weight:700>|</span> router   <span style=color:#000;font-weight:700>|</span> project <span style=color:#000;font-weight:700>|</span> owners <span style=color:#000;font-weight:700>|</span> comment <span style=color:#000;font-weight:700>|</span> description <span style=color:#000;font-weight:700>|</span> keyfile           <span style=color:#000;font-weight:700>|</span> status   <span style=color:#000;font-weight:700>|</span>
+-----------+------+------+---------------------+---------+-------+---------+------------+----------+------------------------+----------+---------+--------+---------+-------------+-------------------+----------+
<span style=color:#000;font-weight:700>|</span> manager   <span style=color:#000;font-weight:700>|</span>      <span style=color:#000;font-weight:700>|</span>      <span style=color:#000;font-weight:700>|</span> ubuntu-20.10-64-bit <span style=color:#000;font-weight:700>|</span>         <span style=color:#000;font-weight:700>|</span>       <span style=color:#000;font-weight:700>|</span> manager <span style=color:#000;font-weight:700>|</span> <span style=color:#ce5c00;font-weight:700>[</span><span style=color:#4e9a06>&#39;bridge&#39;</span><span style=color:#ce5c00;font-weight:700>]</span> <span style=color:#000;font-weight:700>|</span> 10.1.1.2 <span style=color:#000;font-weight:700>|</span>                        <span style=color:#000;font-weight:700>|</span>          <span style=color:#000;font-weight:700>|</span>         <span style=color:#000;font-weight:700>|</span>        <span style=color:#000;font-weight:700>|</span>         <span style=color:#000;font-weight:700>|</span>             <span style=color:#000;font-weight:700>|</span> ~/.ssh/id_rsa.pub <span style=color:#000;font-weight:700>|</span> inactive <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span> worker001 <span style=color:#000;font-weight:700>|</span>      <span style=color:#000;font-weight:700>|</span>      <span style=color:#000;font-weight:700>|</span> ubuntu-20.10-64-bit <span style=color:#000;font-weight:700>|</span>         <span style=color:#000;font-weight:700>|</span>       <span style=color:#000;font-weight:700>|</span> worker  <span style=color:#000;font-weight:700>|</span>            <span style=color:#000;font-weight:700>|</span> 10.1.1.3 <span style=color:#000;font-weight:700>|</span> <span style=color:#ce5c00;font-weight:700>[</span><span style=color:#4e9a06>&#39;8.8.8.8&#39;</span>, <span style=color:#4e9a06>&#39;8.8.4.4&#39;</span><span style=color:#ce5c00;font-weight:700>]</span> <span style=color:#000;font-weight:700>|</span> 10.1.1.2 <span style=color:#000;font-weight:700>|</span>         <span style=color:#000;font-weight:700>|</span>        <span style=color:#000;font-weight:700>|</span>         <span style=color:#000;font-weight:700>|</span>             <span style=color:#000;font-weight:700>|</span> ~/.ssh/id_rsa.pub <span style=color:#000;font-weight:700>|</span> inactive <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span> worker002 <span style=color:#000;font-weight:700>|</span>      <span style=color:#000;font-weight:700>|</span>      <span style=color:#000;font-weight:700>|</span> ubuntu-20.10-64-bit <span style=color:#000;font-weight:700>|</span>         <span style=color:#000;font-weight:700>|</span>       <span style=color:#000;font-weight:700>|</span> worker  <span style=color:#000;font-weight:700>|</span>            <span style=color:#000;font-weight:700>|</span> 10.1.1.4 <span style=color:#000;font-weight:700>|</span> <span style=color:#ce5c00;font-weight:700>[</span><span style=color:#4e9a06>&#39;8.8.8.8&#39;</span>, <span style=color:#4e9a06>&#39;8.8.4.4&#39;</span><span style=color:#ce5c00;font-weight:700>]</span> <span style=color:#000;font-weight:700>|</span> 10.1.1.2 <span style=color:#000;font-weight:700>|</span>         <span style=color:#000;font-weight:700>|</span>        <span style=color:#000;font-weight:700>|</span>         <span style=color:#000;font-weight:700>|</span>             <span style=color:#000;font-weight:700>|</span> ~/.ssh/id_rsa.pub <span style=color:#000;font-weight:700>|</span> inactive <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span> worker003 <span style=color:#000;font-weight:700>|</span>      <span style=color:#000;font-weight:700>|</span>      <span style=color:#000;font-weight:700>|</span> ubuntu-20.10-64-bit <span style=color:#000;font-weight:700>|</span>         <span style=color:#000;font-weight:700>|</span>       <span style=color:#000;font-weight:700>|</span> worker  <span style=color:#000;font-weight:700>|</span>            <span style=color:#000;font-weight:700>|</span> 10.1.1.5 <span style=color:#000;font-weight:700>|</span> <span style=color:#ce5c00;font-weight:700>[</span><span style=color:#4e9a06>&#39;8.8.8.8&#39;</span>, <span style=color:#4e9a06>&#39;8.8.4.4&#39;</span><span style=color:#ce5c00;font-weight:700>]</span> <span style=color:#000;font-weight:700>|</span> 10.1.1.2 <span style=color:#000;font-weight:700>|</span>         <span style=color:#000;font-weight:700>|</span>        <span style=color:#000;font-weight:700>|</span>         <span style=color:#000;font-weight:700>|</span>             <span style=color:#000;font-weight:700>|</span> ~/.ssh/id_rsa.pub <span style=color:#000;font-weight:700>|</span> inactive <span style=color:#000;font-weight:700>|</span>
+-----------+------+------+---------------------+---------+-------+---------+------------+----------+------------------------+----------+---------+--------+---------+-------------+-------------------+----------+
</code></pre></div><h2 id=5-burning-the-cluster>5. Burning the Cluster</h2><p>First, we must install the correct Ubuntu Server image. We can do it as follows:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>you@yourlaptop$ cms burn image get ubuntu-20.10-64-bit
</code></pre></div><p>This will take a few moments&mldr;</p><p>After the image is downloaded, we are ready to burn. Plug in your first SD Card into your card
writer. This will be the manager card. Check your writer&rsquo;s path with the following:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>you@yourlaptop$ cms burn info
<span style=color:#8f5902;font-style:italic># ----------------------------------------------------------------------</span>
<span style=color:#8f5902;font-style:italic># SD Cards Found</span>
<span style=color:#8f5902;font-style:italic># ----------------------------------------------------------------------</span>

+----------+------------------------+-------------+------------------+--------------+------------+---------+----------+-------------+-------------+
<span style=color:#000;font-weight:700>|</span> Path     <span style=color:#000;font-weight:700>|</span> Info                   <span style=color:#000;font-weight:700>|</span> Formatted   <span style=color:#000;font-weight:700>|</span> Size             <span style=color:#000;font-weight:700>|</span> Plugged-in   <span style=color:#000;font-weight:700>|</span> Readable   <span style=color:#000;font-weight:700>|</span> Empty   <span style=color:#000;font-weight:700>|</span> Access   <span style=color:#000;font-weight:700>|</span> Removable   <span style=color:#000;font-weight:700>|</span> Writeable   <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span>----------+------------------------+-------------+------------------+--------------+------------+---------+----------+-------------+-------------<span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span> /dev/sdb <span style=color:#000;font-weight:700>|</span> Generic STORAGE DEVICE <span style=color:#000;font-weight:700>|</span> True        <span style=color:#000;font-weight:700>|</span> 64.1 GB/59.7 GiB <span style=color:#000;font-weight:700>|</span> True         <span style=color:#000;font-weight:700>|</span> True       <span style=color:#000;font-weight:700>|</span> False   <span style=color:#000;font-weight:700>|</span> True     <span style=color:#000;font-weight:700>|</span> True        <span style=color:#000;font-weight:700>|</span> True        <span style=color:#000;font-weight:700>|</span>
+----------+------------------------+-------------+------------------+--------------+------------+---------+----------+-------------+-------------+
</code></pre></div><p>Record the path for the SDCard. In this case, it is <code>/dev/sdb</code></p><blockquote><p>Note we omit some output of <code>cms burn info</code> for clarity.
On MacOS, you may get an <code>ERROR: We could not find your USB reader in the list of known readers</code>. This can be ignored. Additionally, <code>cms burn info</code> will list the partitions as well. For example, if you see the path <code>/dev/disk2s1</code> and <code>/dev/disk2s2</code>, then your device is <code>/dev/disk2</code>.</p></blockquote><p>We can now start burning the cluster.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>you@yourlaptop$ cms burn ubuntu <span style=color:#4e9a06>&#34;manager,worker00[1-3]&#34;</span> --device<span style=color:#ce5c00;font-weight:700>=</span>/dev/sdb --ssid<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;WIFI_SSID&#34;</span> --wifipassword<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;PASSWORD&#34;</span> --country<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;US&#34;</span> -v
</code></pre></div><p>After each card is burned, <code>cms burn ubuntu</code> will prompt you to swap cards to burn the next host.</p><p>After all cards have been burned, we can now plug in our cards into our raspberry pis and boot. We recommend you boot them all at the same time or the manager first.</p><h2 id=6-burn-verification>6. Burn Verification</h2><p>After you boot, we recommend waiting 2-3 minutes for the cloud-init boot process to complete.</p><p>First, ensure you have access to your manager by ssh&rsquo;ing into it. After ssh&rsquo;ing, verify internet connection
with a simple ping.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>you@yourlaptop$ ssh ubuntu@manager.local
ubuntu@manager$ ping google.com
</code></pre></div><blockquote><p>Hint: Use ctrl+c to keyboard interrupt and stop the ping.</p></blockquote><p>Note that if the ping fails or if you cannot ssh into your manager, then the cluster setup has failed as this means
that neither the manager nor workers have internet connection.</p><p>Next, let&rsquo;s verify connection to our workers. You may want to do the following for all hosts, but we only show one for now.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>ubuntu@manager$ ssh worker001
</code></pre></div><p>You should be able to ssh into the worker with no issues after accepting the fingerprint.</p><p>Let us now verify internet connection with proper routing through the following:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>ubuntu@worker001 $ traceroute google.com
traceroute to google.com <span style=color:#ce5c00;font-weight:700>(</span>172.217.7.238<span style=color:#ce5c00;font-weight:700>)</span>, <span style=color:#0000cf;font-weight:700>64</span> hops max
  <span style=color:#0000cf;font-weight:700>1</span>   10.1.1.2  0.431ms  0.364ms  0.356ms
  <span style=color:#0000cf;font-weight:700>2</span>   10.20.76.1  2.422ms  2.194ms  2.416ms
  <span style=color:#0000cf;font-weight:700>3</span>   50.230.235.89  4.739ms  3.705ms  3.153ms
  <span style=color:#0000cf;font-weight:700>4</span>   96.108.121.229  2.906ms  3.191ms  3.933ms
  <span style=color:#0000cf;font-weight:700>5</span>   96.108.120.145  8.996ms  9.530ms  9.724ms
  <span style=color:#0000cf;font-weight:700>6</span>   24.153.88.85  18.129ms  17.197ms  16.679ms
  <span style=color:#0000cf;font-weight:700>7</span>   96.110.40.49  19.170ms  18.062ms  18.242ms
  <span style=color:#0000cf;font-weight:700>8</span>   96.110.33.202  18.955ms  17.627ms  17.063ms
  <span style=color:#0000cf;font-weight:700>9</span>   96.87.9.122  15.804ms  15.120ms  15.679ms
</code></pre></div><blockquote><p>Hint: Again, you can use ctrl+c to keyboard interrupt and terminate traceroute.</p></blockquote><p>Note here how the first line of the result of <code>traceroute</code> indicates we went through the <code>manager</code> at ip <code>10.1.1.2</code>
to access the internet. This is expected.</p><p>If you run into an issue with <code>traceroute</code> (for example, <code>command not found</code>), then there is likely an issue with
internet access. Verify your manager has WiFi access.</p><p>Our cluster is now complete, and we have verified proper burning. We may now do other interesting things with this cluster (such as installing <code>k3s</code>)</p></div><div class=td-content style=page-break-before:always><h1 id=pg-20addf5f1313d1459bd24fe54815c81f>5 - Command cms</h1><div class=lead>How to ad dnew commands to cloudmesh.</div><div class="card rounded p-2 td-post-card mb-4 mt-4" style=max-width:610px><img class=card-img-top src=/pi/tutorial/cms-commands/featured-image_hu31ad1de8477c329f5412ff59acdd044d_22590_600x300_fill_catmullrom_smart1_2.png width=600 height=300><div class="card-body px-0 pt-2 pb-0"><p class=card-text>Cloudmesh Commands</p></div></div><div class="pageinfo pageinfo-primary"><p>We explain how to very quickly add new commands to cloudmesh</p><p><strong>Learning Objectives</strong></p><ul><li>Learn how to quickly add new commands to cloudmesh</li><li>Learn how to modify the commands for your liking</li><li>Understand how we use docopts for manual page generation</li></ul><p><strong>Topics covered</strong></p><div class=toc><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a><ul><li><a href=#check-if-you-have-a-good-version-of-python>Check if you have a good version of python</a></li><li><a href=#creating-new-commands>Creating new commands</a></li><li><a href=#modifying-the-command>Modifying the command</a></li><li><a href=#accessing-variables>Accessing Variables</a></li><li><a href=#debugging-dicts-and-variables>Debugging dicts and variables</a></li></ul></li><li><a href=#references>References</a></li></ul></nav></div></div><h2 id=introduction>Introduction</h2><p>Cloudmesh offers an easy-to-use command line and shell interface using a library
called <code>cloudmesh-cmd5</code>. Cmd5 installs a program called Cloudmesh Shell or
<code>cms</code> when called in a terminal. Cludmesh can be installed either directly from pip of developers can install it via the cloudmesh-installer that also downloads the source. The installations are discussed in detail in the Cloudmesh Manual.</p><p>In any case, we recommend you use a venv to assure that you d not by accident
destroy your system-wide python installation. We always use the environment
<code>~/ENV3</code> to have all tutorials uniform and to simplify them. If you do not yet have one create it as follows.</p><h3 id=check-if-you-have-a-good-version-of-python>Check if you have a good version of python</h3><p>We recommend installing a 64-bit version of python directly from python.org.
Anaconda is also possible, but we do not use anaconda much as it has many
unnecessary packages and thus is not ideal for cloud-based research. It is
always better to assemble just the libraries that you really need.</p><pre><code>python --version
# on some systems you need to use python3 or python3.9
</code></pre><p>For convenience, we assume your system uses python3.9. Now create the venv with</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ python3.9 -m venv ~/ENV3
$ <span style=color:#204a87>source</span> ~/ENV3/bin/activate
$ pip install pip -U
</code></pre></div><p>To install Cloudmesh shell from PyPI you can say</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ pip install cloudmesh-cms
</code></pre></div><p>To install it with source say</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ mkdir ~/cm
$ <span style=color:#204a87>cd</span> ~/cm
$ pip install cloudmesh-installer
$ cloudmesh-installer get cms
$ cmas <span style=color:#204a87>help</span>
</code></pre></div><h3 id=creating-new-commands>Creating new commands</h3><p>Now you have everything that you need to install new commands. The important
feature that cloudmesh includes is that it uses python namespaces. This makes
it possible to develop your own command in separate directories and store them
in GitHub in your own repositories.</p><p>To create a command we simply create a new directory for it and populate it
with a template by calling the command generation command in cloudmesh. For
simplicity, we name the directory <code>cloudmesh-gregor</code> but you can name it the way
you like it. We intend to create a command called gergor</p><pre><code>mkdir -p ~/cm/cloudmesh-gregor
cd ~/cm/cloudmesh-gregor
cms sys command generate gregor .
pip install -e .
cms help
</code></pre><p>Yes, this is it, you have now generated a new command <code>gregor</code> that you can see listed in the commands. Try it out with</p><pre><code>cms gregor
</code></pre><h3 id=modifying-the-command>Modifying the command</h3><p>To change the source, go to the file</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>emacs ~/cm/cloudmesh-gregor/cloudmesh/gregor/command/gregor.py
</code></pre></div><p>There you will see a comment as part of the command using docopts. We chose
docopts for our command generation as it allows us to design the documentation
first before we implement it. Docopts will take this docstring and generate a
dictionary that we can inspect and use in if conditions. We have significantly
enhanced the cms tool from python to more conveniently program new commands.
For example, we use a <code>dotdict</code>
implementation allowing us to say</p><p><code>arguments.FILE</code> instead of <code>argunemnts["FILE"]</code></p><p>This has two limitations</p><ol><li><p>you can not use build-in names such as <code>format</code>, <code>list</code>, and so on. In this case, you still have to use <code>arguments["format"]</code> as <code>.format</code> in python has a
very special meaning.</p></li><li><p>in case a parameter is passed as an option with <code>--option</code> or <code>--option2=OPTION2</code>
you can obviously not use <code>arguments.--option</code>
For you to use <code>arguments.option</code> we introduced a function called
Parameter</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>cloudmesh.shell.command</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>command</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>map_parameters</span>
   
<span style=color:#000>map_parameters</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>arguments</span><span style=color:#000;font-weight:700>,</span>
               <span style=color:#4e9a06>&#34;option&#34;</span><span style=color:#000;font-weight:700>,</span>
               <span style=color:#4e9a06>&#34;option2&#34;</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><p>that maps the <code>--</code> preceded options simply into the arguments dictionary
without the <code>--</code>.</p></li></ol><h3 id=accessing-variables>Accessing Variables</h3><p>Cloudmesh has also a build-in mechanism to store and use cms variables. YOu can
see them while using the command</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#a40000>$</span> <span style=color:#000>cms</span> <span style=color:#204a87>set</span>
</code></pre></div><p>These are variables that you can use to for example initialize options not
just form the command line, but through preset values you yous yourself.</p><p>Let us assume you like to preset the FILE to the value <code>~/cm/cloudmesh-gregor/README.md</code></p><p>you can do this with</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000>cms</span> <span style=color:#204a87>set</span> <span style=color:#000>FILE</span><span style=color:#ce5c00;font-weight:700>=~/</span><span style=color:#000>cm</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>cloudmesh</span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>gregor</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>README</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>md</span><span style=color:#a40000>`</span>
</code></pre></div><p>Now you can enhance your program by checking if the variable exists and use
it. This has the advantage that the implementation is slightly more dynamic
than using the <code>[default: value]</code> option from cloudmesh and allows to use of a
shared state of the variable between invocations.</p><p>We simply add the following just after the map parameters function</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000>variables</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Variables</span><span style=color:#000;font-weight:700>()</span>

<span style=color:#000>arguments</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>output</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Parameter</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>find</span><span style=color:#000;font-weight:700>(</span>
    <span style=color:#4e9a06>&#34;FILE&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#000>arguments</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#000>variables</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#4e9a06>&#34;~/cm/cloudmesh-gregor/README.md&#34;</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><p>The order in the <code>find</code> is done sequentially. First, we look if arguments.FILE
is defined by the command, then we look if it is in the variables, then we set a
default value. The default value is simply last.</p><h3 id=debugging-dicts-and-variables>Debugging dicts and variables</h3><p>We also included a simple debug function that prints the content of dicts as
well as the filename and the line number in the program.</p><p>YOu can use it for displaying the contents of the arguments so you can see how
to best crate if conditions that react to their state. Please be reminded that
the order in the if conditions are relevant t write your command. Assure your
<code>arguments</code> setting does not fire the specific rule you intend
to use.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>cloudmesh.common.debug</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>VERBOSE</span>

<span style=color:#000>VERBOSE</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>arguments</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><p>YOU can use VERBOSE with any variable, but it works best with one dicts having
a single layer such as <code>arguments</code> or <code>variables</code>.</p><h2 id=references>References</h2><ol><li>CLoudmesh manual</li><li>cms sys</li><li><code>from cloudmesh.shell.command import command, map_parameters</code></li><li><code>from cloudmesh.common.debug import VERBOSE</code></li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-365942066084bc21f9d613f5a75c656b>6 - Introduction to Docker</h1><div class=lead>This post will cover Docker basics and commands</div><div class="card rounded p-2 td-post-card mb-4 mt-4" style=max-width:610px><img class=card-img-top src=/pi/tutorial/docker-pi/featured-image_hu31875f36274441b0b28686e529b64633_4584_600x300_fill_catmullrom_smart1_2.png width=600 height=300><div class="card-body px-0 pt-2 pb-0"><p class=card-text>TODO: Caption for the image
<small class=text-muted><br>Photo: Gregor von Laszewski / CC-BY-CA</small></p></div></div><div class="pageinfo pageinfo-primary"><p>Please describe what this tutorial is about.</p><p><strong>Learning Objectives</strong></p><ul><li>Learn how to &mldr;</li></ul><p><strong>Topics covered</strong></p><div class=toc><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#hypervisor-vs-container-based-virtualization>Hypervisor vs container-based virtualization</a></li><li><a href=#docker-architecture>Docker architecture</a></li><li><a href=#docker-objects>Docker objects</a><ul><li><a href=#images>Images</a></li><li><a href=#containers>Containers</a></li><li><a href=#registries-and-repositories>Registries and Repositories</a></li></ul></li><li><a href=#two-ways-to-build-docker-images>Two ways to build docker images</a><ul><li><a href=#commit-changes-made-in-a-docker-container>Commit changes made in a Docker container</a></li><li><a href=#write-a-dockerfile>Write a Dockerfile</a></li></ul></li><li><a href=#docker-build-context>Docker Build Context</a></li><li><a href=#docker-compose>Docker Compose</a></li><li><a href=#docker-network-types>Docker Network Types</a></li><li><a href=#orchestration>Orchestration</a></li><li><a href=#docker-swarm>Docker Swarm</a></li><li><a href=#reference>Reference</a></li></ul></nav></div></div><h2 id=introduction>Introduction</h2><p>Docker is an open platform for developing, shipping, and running applications. Docker enables you to separate your
applications from your infrastructure so you can deliver software quickly. With Docker, you can manage your infrastructure in the same ways you manage your applications. By taking advantage of Docker’s methodologies for shipping, testing, and deploying code quickly, you can significantly reduce the delay between writing code and running it in production.</p><h2 id=hypervisor-vs-container-based-virtualization>Hypervisor vs container-based virtualization</h2><ul><li>Hypervisor – As seen in figure 1, there are limitations with hypervisor - Kernel Resource Duplication and Application Portability Issue</li><li>Container – As seen in figure 2, container based virtualization is cost efficient, fast deployment and guaranteed portability.</li></ul><p><img src=https://raw.githubusercontent.com/cloudmesh/pi/main/content/en/tutorial/docker-pi/Figure1.png alt="Figure 1"></p><p><img src=https://raw.githubusercontent.com/cloudmesh/pi/main/content/en/tutorial/docker-pi/Figure2.png alt="Figure 2"></p><h2 id=docker-architecture>Docker architecture</h2><p>Docker uses a client-server architecture. The Docker client talks to the Docker daemon, which does the heavy lifting of building, running, and distributing your Docker containers. The Docker client and daemon can run on the same system or connect a Docker client to a remote Docker daemon. The Docker client and daemon communicate using a REST API, over UNIX sockets, or a network interface. Another Docker client is Docker Compose, which lets you work with applications consisting of a set of containers.</p><p><img src=https://raw.githubusercontent.com/cloudmesh/pi/main/content/en/tutorial/docker-pi/Figure3.png alt=Figure3></p><h2 id=docker-objects>Docker objects</h2><h3 id=images>Images</h3><ul><li>Images are read-only templates used to create containers.</li><li>Images are created with the docker build command, either by us or by other docker users.</li><li>Images are composed of layers of other images.</li><li>Images are stored in a Docker registry.</li></ul><h3 id=containers>Containers</h3><ul><li>If an image is a class, then a container is an instance of a class - a runtime object.</li><li>Containers are lightweight and portable encapsulations of an environment in which to run applications.</li><li>Containers are created from images. Inside a container, it has all the binaries and dependencies needed to run the application.</li></ul><h3 id=registries-and-repositories>Registries and Repositories</h3><ul><li>A registry is where we store our images.</li><li>You can host your own registry, or you can use Docker’s public registry which is called DockerHub.</li><li>Inside a registry, images are stored in repositories.</li><li>Docker repository is a collection of different docker images with the same name, that have different tags, each tag usually represents a different version of the image.</li></ul><h2 id=two-ways-to-build-docker-images>Two ways to build docker images</h2><h3 id=commit-changes-made-in-a-docker-container>Commit changes made in a Docker container</h3><p>Docker commit command would save the changes we made to the Docker container’s file system to a new image</p><pre><code>   docker commit container_ID repository_name:tag
</code></pre><h3 id=write-a-dockerfile>Write a Dockerfile</h3><p>A Dockerfile is a text document that contains all the instructions users provide to assemble an image.
Each instruction will create a new image layer to the image.
Instructions specify what to do when building the image.</p><h2 id=docker-build-context>Docker Build Context</h2><p>Docker build command takes the path to the build context as an argument.
When build starts, docker client would pack all the files in the build context into a tarball then transfer the tarball file to the daemon. By default, docker would search for the Dockerfile in the build context path.</p><h2 id=docker-compose>Docker Compose</h2><p>Docker compose is a very handy tool to quickly get docker environment up and running.</p><p>Docker compose uses yaml files to store the configuration of all the containers, which removes the burden to maintain our scripts for docker orchestration</p><ul><li>docker compose up starts up all the containers.</li><li>docker compose ps checks the status of the containers managed by docker compose.</li><li>docker compose logs outputs colored and aggregated logs for the compose-managed
containers.</li><li>docker compose logs with dash f option outputs appended log when the log grows.</li><li>docker compose logs with the container name in the end outputs the logs of a specific
container.</li><li>docker compose stop stops all the running containers without removing them.</li><li>docker compose rm removes all the containers.</li><li>docker compose build rebuilds all the images.</li></ul><h2 id=docker-network-types>Docker Network Types</h2><ul><li>Closed Network / None Network</li><li>Bridge Network</li><li>Host Network</li><li>Overlay Network</li></ul><h2 id=orchestration>Orchestration</h2><p>The portability and reproducibility of a containerized process mean we have an opportunity to move and scale our containerized applications across clouds and data centers. Containers effectively guarantee that those applications run the same way anywhere, allowing us to quickly and easily take advantage of all these environments. Furthermore, as we scale our applications up, we’ll want some tooling to automate the maintenance of those applications, replace failed containers automatically, and manage the rollout of updates and reconfigurations of those containers during their lifecycle.
Tools to manage, scale, and maintain containerized applications are called orchestrators, and the most common examples of these are Kubernetes and Docker Swarm.</p><h2 id=docker-swarm>Docker Swarm</h2><ul><li>To deploy your application to a swarm, you submit your service to a manager node.</li><li>The manager node dispatches units of work called tasks to worker nodes.</li><li>Manager nodes also perform the orchestration and cluster management functions required to maintain the desired state of the swarm.</li><li>Worker nodes receive and execute tasks dispatched from manager nodes.</li><li>An agent runs on each worker node and reports on the tasks assigned to it. The worker node notifies the manager node of the current state of its assigned tasks so that the manager can maintain the desired state of each worker.</li></ul><h2 id=reference>Reference</h2></div><div class=td-content style=page-break-before:always><h1 id=pg-e366e3514fac18c1ed613e3a5cbad167>7 - Tutorial Links</h1><div class=lead>A collection of potentially useful tutorial links.</div><div class="card rounded p-2 td-post-card mb-4 mt-4" style=max-width:610px><img class=card-img-top src=/pi/tutorial/links/featured-pi-logo_hu5b8151c4a85d6b42524e2eadfdb8c838_56492_600x300_fill_q75_catmullrom_smart1.jpg width=600 height=300><div class="card-body px-0 pt-2 pb-0"><p class=card-text>Tutorial Links.</p></div></div><div class="pageinfo pageinfo-primary"><p>A collection of potentially useful tutirial links</p><p><strong>Learning Objectives</strong></p><ul><li>Collect useful information</li></ul><p><strong>Topics covered</strong></p><div class=toc><nav id=TableOfContents><ul><li><a href=#interesting-links-to-burn-sdcards>Interesting Links to burn SDCards</a></li><li><a href=#interesting-links-for-raspberryos>Interesting links for RaspberryOS</a></li><li><a href=#other-toys>Other toys</a></li><li><a href=#camera>Camera</a></li></ul></nav></div></div><h2 id=interesting-links-to-burn-sdcards>Interesting Links to burn SDCards</h2><p>interesting article to use a vm to modify the image</p><ul><li>modify image <a href=https://opensource.com/article/20/5/disk-image-raspberry-pi>https://opensource.com/article/20/5/disk-image-raspberry-pi</a></li><li>NFS <a href=https://opensource.com/article/20/5/nfs-raspberry-pi>https://opensource.com/article/20/5/nfs-raspberry-pi</a></li></ul><h2 id=interesting-links-for-raspberryos>Interesting links for RaspberryOS</h2><ul><li>file sync <a href=https://pimylifeup.com/raspberry-pi-syncthing/>https://pimylifeup.com/raspberry-pi-syncthing/</a></li><li>mngodb <a href=https://pimylifeup.com/mongodb-raspberry-pi/>https://pimylifeup.com/mongodb-raspberry-pi/</a></li><li>raspicast <a href=https://pimylifeup.com/raspberry-pi-chromecast/>https://pimylifeup.com/raspberry-pi-chromecast/</a></li><li>internet monitor <a href=https://pimylifeup.com/raspberry-pi-internet-speed-monitor/>https://pimylifeup.com/raspberry-pi-internet-speed-monitor/</a></li><li>nfs server <a href=https://pimylifeup.com/raspberry-pi-nfs/>https://pimylifeup.com/raspberry-pi-nfs/</a></li><li>grafana <a href=https://pimylifeup.com/raspberry-pi-grafana/>https://pimylifeup.com/raspberry-pi-grafana/</a></li><li>doccker <a href=https://pimylifeup.com/raspberry-pi-docker/>https://pimylifeup.com/raspberry-pi-docker/</a></li><li>gdrive <a href=https://pimylifeup.com/compiling-and-running-gdrive/>https://pimylifeup.com/compiling-and-running-gdrive/</a></li><li>ubuntu server enable ssh <a href=https://pimylifeup.com/ubuntu-server-raspberry-pi/>https://pimylifeup.com/ubuntu-server-raspberry-pi/</a></li><li>go <a href=https://pimylifeup.com/raspberry-pi-golang/>https://pimylifeup.com/raspberry-pi-golang/</a></li><li>mqtt <a href=https://pimylifeup.com/raspberry-pi-mosquitto-mqtt-server/>https://pimylifeup.com/raspberry-pi-mosquitto-mqtt-server/</a></li></ul><h2 id=other-toys>Other toys</h2><ul><li>php myadmin <a href=https://pimylifeup.com/raspberry-pi-phpmyadmin/>https://pimylifeup.com/raspberry-pi-phpmyadmin/</a></li><li>webcam <a href=https://pimylifeup.com/raspberry-pi-webcam-server/>https://pimylifeup.com/raspberry-pi-webcam-server/</a></li><li>owncloud <a href=https://pimylifeup.com/raspberry-pi-owncloud/>https://pimylifeup.com/raspberry-pi-owncloud/</a></li><li>git server <a href=https://pimylifeup.com/raspberry-pi-owncloud/>https://pimylifeup.com/raspberry-pi-owncloud/</a></li><li>wifi bridge <a href=https://pimylifeup.com/raspberry-pi-wifi-bridge/>https://pimylifeup.com/raspberry-pi-wifi-bridge/</a></li><li>next cloud <a href=https://pimylifeup.com/raspberry-pi-nextcloud-server/>https://pimylifeup.com/raspberry-pi-nextcloud-server/</a></li><li>twitch bot <a href=https://pimylifeup.com/raspberry-pi-twitch-bot/>https://pimylifeup.com/raspberry-pi-twitch-bot/</a></li><li>captive portal to use wifi <a href=https://pimylifeup.com/raspberry-pi-captive-portal/>https://pimylifeup.com/raspberry-pi-captive-portal/</a></li><li>ndnix <a href=https://pimylifeup.com/raspberry-pi-nginx/>https://pimylifeup.com/raspberry-pi-nginx/</a></li><li>vlc <a href=https://pimylifeup.com/raspberry-pi-vlc/>https://pimylifeup.com/raspberry-pi-vlc/</a></li><li>ebook server <a href=https://pimylifeup.com/raspberry-pi-ebook-server/>https://pimylifeup.com/raspberry-pi-ebook-server/</a></li><li><a href=https://pimylifeup.com/raspberry-pi-screen-sharing/>https://pimylifeup.com/raspberry-pi-screen-sharing/</a></li><li>add blocker <a href=https://pimylifeup.com/raspberry-pi-pi-hole/>https://pimylifeup.com/raspberry-pi-pi-hole/</a></li><li>fail to ban <a href=https://pimylifeup.com/raspberry-pi-fail2ban/>https://pimylifeup.com/raspberry-pi-fail2ban/</a></li></ul><h2 id=camera>Camera</h2><ul><li>control dslr <a href=https://pimylifeup.com/raspberry-pi-dslr-camera-control/>https://pimylifeup.com/raspberry-pi-dslr-camera-control/</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-112a4df841cb55c94a6b183558c66221>8 - Network Scanning Tutorial</h1><div class=lead>This post includes useful network enumeration commands.</div><div class="card rounded p-2 td-post-card mb-4 mt-4" style=max-width:610px><img class=card-img-top src=/pi/tutorial/network-scanning-tutorial/featured-image_hu31ad1de8477c329f5412ff59acdd044d_22590_600x300_fill_catmullrom_smart1_2.png width=600 height=300><div class="card-body px-0 pt-2 pb-0"><p class=card-text>The Web Page.</p></div></div><div class="pageinfo pageinfo-primary"><p>Abstract</p><p><strong>Learning Objectives</strong></p><ul><li>Learn how to enumerate and verify network conditions on a Pi cluster.</li></ul><p><strong>Topics covered</strong></p><div class=toc><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a><ul><li><a href=#ip-address>IP Address</a></li><li><a href=#ping>Ping</a></li><li><a href=#arp>ARP</a></li><li><a href=#route>Route</a></li><li><a href=#traceroute>Traceroute</a></li><li><a href=#etchosts>/etc/hosts</a></li></ul></li></ul></nav></div></div><h2 id=introduction>Introduction</h2><p>While working with clusters there will be many times you need to
troubleshoot network connectivity. Below are useful commands to help you enumerate
and verify you network is operating correctly.</p><h3 id=ip-address>IP Address</h3><p>The ip address command can help you determine your network interface card
configuration (NIC) including IP address, networks, and MAC address.</p><pre><code>(ENV3) pi@red:~ $ ip address
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000
    link/ether dc:a6:32:e8:03:09 brd ff:ff:ff:ff:ff:ff
    inet 10.1.1.1/24 brd 10.1.1.255 scope global noprefixroute eth0
       valid_lft forever preferred_lft forever
    inet6 fe80::bc02:69de:ea6d:78a2/64 scope link 
       valid_lft forever preferred_lft forever
3: wlan0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether dc:a6:32:e8:03:0a brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.27/24 brd 192.168.1.255 scope global dynamic noprefixroute wlan0
       valid_lft 86368sec preferred_lft 75568sec
    inet6 fe80::20a9:5c10:42fe:5eb0/64 scope link 
       valid_lft forever preferred_lft forever
(ENV3) pi@red:~ $ 

</code></pre><h3 id=ping>Ping</h3><p>To ping an IP address</p><pre><code>ping 10.1.1.1
</code></pre><h4 id=ping-when-you-do-not-know-the-ip-address>Ping when you do not know the IP address.</h4><p>Try using multicast doman name servcie (mDNS) to resolve the hostname using
the .local extension.</p><pre><code>ping red.local
</code></pre><h4 id=ping-from-a-specific-interface>Ping from a specific interface</h4><p>If you need to ping out a specific interface, such as eth0 or wlan0</p><pre><code>ping -I wlan0 red.local
</code></pre><h3 id=arp>ARP</h3><p>When your computer needs to send a packet to an IP address it must
first determine the next hop MAC address. It does this using the ARP protocol.</p><h4 id=to-view-the-arp-table-mac-address-to-ip-address->To view the ARP table (MAC Address to IP address )</h4><p>Next hop MAC address to IP pairings can be viewed in the ARP table. The ARP
also contains conveniently contains hostnames if they were resolved.</p><pre><code>arp -a
</code></pre><pre><code>pi@red:~ $ arp -a
red001 (10.1.1.2) at dc:a6:32:e7:fe:69 [ether] on eth0
? (192.168.1.1) at dc:ef:09:d9:5f:64 [ether] on wlan0
? (192.168.1.12) at e4:b3:18:d4:bd:d1 [ether] on wlan0
? (192.168.1.14) at e8:d8:d1:82:42:b8 [ether] on wlan0
red002 (10.1.1.3) at dc:a6:32:e8:02:25 [ether] on eth0
</code></pre><h4 id=to-clear-the-arp-table-forcing-mac-addresses-to-be-resolved-again-on-next-use>To clear the ARP table, forcing MAC addresses to be resolved again on next use.</h4><pre><code>ip -s -s neigh flush all
</code></pre><h3 id=route>Route</h3><p>The route command shows you all the rules you machine uses to route packets.</p><p>The example below informs us the default route is using the wlan0 interface,
while the 10.1.1.0/24 network will be reached using the eth0 interface.</p><pre><code>pi@red:~ $ route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
default         192.168.1.1     0.0.0.0         UG    303    0        0 wlan0
10.1.1.0        0.0.0.0         255.255.255.0   U     202    0        0 eth0
192.168.1.0     0.0.0.0         255.255.255.0   U     303    0        0 wlan0
</code></pre><h3 id=traceroute>Traceroute</h3><p>Traceroute is a tool to determine the network routers on a path from your
host to a destination ip. For example, lets verify the worker (red001) uses the
manager pi (10.1.1.1) to reach the internet (8.8.8.8)</p><pre><code>pi@red001:~ $ traceroute 8.8.8.8
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  red (10.1.1.1)  0.290 ms  0.252 ms  0.182 ms
 2  192.168.1.1 (192.168.1.1)  3.362 ms  3.577 ms  3.484 ms
 3  96.120.112.113 (96.120.112.113)  22.974 ms  15.305 ms  21.364 ms
 4  96.110.168.9 (96.110.168.9)  20.590 ms  19.890 ms  20.401 ms
 5  96.108.120.86 (96.108.120.86)  20.164 ms  21.079 ms  21.164 ms
 6  96.108.120.145 (96.108.120.145)  27.577 ms  22.101 ms  22.144 ms
 7  24.153.88.85 (24.153.88.85)  28.857 ms  29.504 ms  29.553 ms
 8  be-32241-cs04.350ecermak.il.ibone.comcast.net (96.110.40.61)  30.314 ms  31.071 ms  31.177 ms
 9  be-2112-pe12.350ecermak.il.ibone.comcast.net (96.110.33.210)  36.510 ms be-2412-pe12.350ecermak.il.ibone.comcast.net (96.110.33.222)  36.423 ms be-2111-pe11.350ecermak.il.ibone.comcast.net (96.110.33.194)  35.794 ms
10  96-87-9-122-static.hfc.comcastbusiness.net (96.87.9.122)  33.767 ms 66.208.233.86 (66.208.233.86)  34.202 ms 96-87-9-122-static.hfc.comcastbusiness.net (96.87.9.122)  34.035 ms
11  * * *
12  dns.google (8.8.8.8)  33.843 ms  33.433 ms  34.622 ms

</code></pre><h4 id=nmap>NMAP</h4><p>NMAP is a a tool that can conduct a wide variety of network scans. We will
use NMAP to find the IP of our manager pi (red) from our laptop on our
wireless network (192.168.1.0/24).</p><blockquote><p>Note: Raspberry Pi MAC addresses start with DC:A6:32, so we know 192.168.1.
27 is our manager pi</p></blockquote><pre><code>anthony@anthony-ubuntu:~$ sudo nmap -sP 192.168.1.0/24

Starting Nmap 7.60 ( https://nmap.org ) at 2021-03-11 14:16 EST
Nmap scan report for _gateway (192.168.1.1)
Host is up (0.0031s latency).
MAC Address: DC:EF:09:D9:5F:64 (Netgear)
Nmap scan report for 192.168.1.7
Host is up (0.18s latency).
MAC Address: E0:F6:B5:EA:C6:CC (Unknown)
Nmap scan report for 192.168.1.14
Host is up (0.46s latency).
MAC Address: E8:D8:D1:82:42:B8 (Unknown)
Nmap scan report for 192.168.1.19
Host is up (-0.017s latency).
MAC Address: 34:93:42:87:BA:46 (Unknown)
Nmap scan report for 192.168.1.23
Host is up (0.98s latency).
MAC Address: D0:D2:B0:90:2E:60 (Apple)
Nmap scan report for 192.168.1.27
Host is up (1.5s latency).
MAC Address: DC:A6:32:E8:03:0A (Unknown)
Nmap scan report for anthony-ubuntu (192.168.1.12)
Host is up.
Nmap done: 256 IP addresses (7 hosts up) scanned in 17.90 seconds
</code></pre><h3 id=etchosts>/etc/hosts</h3><p>This file contains static hostname to IP mappings.</p><pre><code>(ENV3) pi@red:~ $ cat /etc/hosts
127.0.0.1  localhost
::1        localhost ip6-localhost ip6-loopback
ff02::1    ip6-allnodes
ff02::2    ip6-allrouters
#
127.0.1.1  red
#
10.1.1.1	red
10.1.1.2	red001
10.1.1.3	red002
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-38142d6afd1cbdafe9e93351683a6a9a>9 - Port Forwarding Tutorial</h1><div class=lead>Enable cluster-internal service access to external machines</div><div class="card rounded p-2 td-post-card mb-4 mt-4" style=max-width:610px><img class=card-img-top src=/pi/tutorial/port-forwarding-ssh-tunnels/featured-web-port-forward_hua2ee70c9cd56e08e641ddf485eab0d08_78292_600x300_fill_catmullrom_smart1_2.png width=600 height=300><div class="card-body px-0 pt-2 pb-0"><p class=card-text>Port Forwarding Tutorial</p></div></div><div class="pageinfo pageinfo-primary"><p>c</p><p><strong>Learning Objectives</strong></p><ul><li><p>Learn how to provide external machines permanent access to cluster-internal
services with ssh port forwarding, autossh, and systemd</p></li><li><p>Easily SSH into cluster internal machines from an external machine using
ProxyJump.</p></li></ul><p><strong>Topics covered</strong></p><div class=toc><nav id=TableOfContents><ul><li><a href=#port-forwarding-tutorial>Port Forwarding Tutorial</a><ul><li><a href=#how-to-do-a-local-port-forward-for-internal-node-ssh-access-via-the-manager-node>How to do a local port forward for internal node SSH access via the manager node</a></li><li><a href=#how-to-make-a-local-port-forward-tunnel-persistent-using-autossh-and-systemd>How to make a local port forward tunnel persistent using Autossh and Systemd</a></li><li><a href=#how-to-use-proxyjump-for-ssh-access-to-internal-node-via-the-manager-node>How to use ProxyJump for SSH access to internal node via the manager node</a></li><li><a href=#can-proxyjump-be-used-for-arbitary-services>Can ProxyJump be used for arbitary services?</a></li><li><a href=#use-local-port-forward-to-expose-arbitrary-service>Use local port forward to expose arbitrary service</a></li><li><a href=#reccmmendatoins>Reccmmendatoins</a></li></ul></li></ul></nav></div></div><h2 id=port-forwarding-tutorial>Port Forwarding Tutorial</h2><h3 id=how-to-do-a-local-port-forward-for-internal-node-ssh-access-via-the-manager-node>How to do a local port forward for internal node SSH access via the manager node</h3><blockquote><p>NOTE: This is actually more than what is needed if all you want is SSH, see
ProxyJump section below</p></blockquote><p>In this image below we setup a ssh tunnel on the manager pi to enable ssh
access from the laptop to the worker node Red001.</p><p>The manager and laptop must both be included in red001&rsquo;s
<code>~/.ssh/authorized_hosts</code> file.</p><p><img src=https://github.com/cloudmesh/cloudmesh-pi-cluster/raw/main/images/ssh-port-forward.PNG alt></p><p>We create one tunnel for each worker each with a unique wlan_ip:port assigned.</p><p>Now in the laptop <code>~/.ssh/config</code> file we add:</p><pre><code>Host red
     HostName    red.local
     User        pi

Host red001
     HostName    red.local
     User        pi
     Port       8001

Host red002
     HostName    red.local
     User        pi
     Port        8002
</code></pre><p>Finally we can ssy from the laptop to the worker.</p><pre><code>you@laptop:~ $ ssh red001
</code></pre><p><strong>However, this tunnel is not permanent as is.</strong> Besides manager or worker
*restarts, it is also subject to communication failures, such as timeouts, that
*will cause the tunnel to break. This will force the user to re-run the command
*to create the tunnel, and in some cases, find and kill a failed but still
*existing tunnel process.</p><p>For additional visualizations and discussion of local and remote port
forwarding see <a href=http://dirk-loss.de/ssh-port-forwarding.htm>http://dirk-loss.de/ssh-port-forwarding.htm</a></p><h3 id=how-to-make-a-local-port-forward-tunnel-persistent-using-autossh-and-systemd>How to make a local port forward tunnel persistent using Autossh and Systemd</h3><p>Autossh is a program designed to automatically restart SSH sessions and
tunnels.</p><p>Systemd is a Linux system and service manager used by Raspi OS.</p><p>We use systemd to install an autossh service that starts on system boot to
establish the ssh tunnel.</p><p>Create the below file. Notice this requires the wifi IP address on the manager
(wlan0 e.g. 192.168.1.24).</p><p><code>/etc/systemd/system/autossh-red001.service</code></p><pre><code>[Unit]
Description=AutoSSH tunnel service to red001 on local port 8001
After=multi-user.target

[Service]
User=pi
Group=pi
Environment=&quot;AUTOSSH_GATETIME=0&quot;
ExecStart=/usr/bin/autossh -M 0 -o &quot;ServerAliveInterval 30&quot; -o &quot;ServerAliveCountMax 3&quot; -i /home/pi/.ssh/id_rsa -NL 192.168.1.24:8001:localhost:22 pi@red001

[Install]
WantedBy=multi-user.target
</code></pre><p>To get the service to start and be enabled on system restart we need to run the
following commands.</p><pre><code>sudo systemctl daemon-reload
sudo systemctl start autossh-red001.service
sudo systemctl enable autossh-red001.service
</code></pre><blockquote><p>NOTE: As we are binding the tunnel to a dynamically assigned address on our
wlan0 interface. The tunnel will not function if wlan0 interface is assigned a
different IP.</p></blockquote><p>Currently the command below will setup a autossh tunnel for ssh access to the
workers.</p><p><code>pi@manger $ cms host tunnel create red00[1-2] [--port]</code> If the wifi IP
changes, the above command needs to be run again, but the ssh config on the
laptop will not need to be changed unless the user specifies new ports.</p><h3 id=how-to-use-proxyjump-for-ssh-access-to-internal-node-via-the-manager-node>How to use ProxyJump for SSH access to internal node via the manager node</h3><p>It turns out setting up a port forward for simple ssh access to the workers via
the manger is over complicated.</p><p>ProxyJump is an SSH option that exists to simply this purpose. It is also more
reliabe as the tunnel is setup on demand.</p><p>See the example below.</p><pre><code>ssh -J pi@red.local pi@red001
</code></pre><p>We can also do this with a only <code>~/.ssh/config</code> file.</p><pre><code>Host red
   Hostname red.local
   User	    pi
   
Host red001
   Hostname red001
   User	    pi
   ProxyJump red
</code></pre><p>No we can simply setup a tunnel on demand as we access the worker.</p><pre><code>you@laptop:~ $ ssh red001
</code></pre><h3 id=can-proxyjump-be-used-for-arbitary-services>Can ProxyJump be used for arbitary services?</h3><p>I don&rsquo;t know yet. Based on a quick glance at this article, the answer is
<strong>no</strong>, but it can be useful if you need to tunnel through multiple hosts
before starting a remote port forward.</p><p><a href=https://medium.com/maverislabs/proxyjump-the-ssh-option-you-probably-never-heard-of-2d7e41d43464>https://medium.com/maverislabs/proxyjump-the-ssh-option-you-probably-never-heard-of-2d7e41d43464</a></p><h3 id=use-local-port-forward-to-expose-arbitrary-service>Use local port forward to expose arbitrary service</h3><p>So, port forwarding is still useful to expose arbitrary services.</p><p>In the example below we expose a worker running cloudmesh-openapi on port 80 to
the laptop with a local port foward. Again we can make this permanent with
autossh and systemd.</p><p><img src=https://github.com/cloudmesh/cloudmesh-pi-cluster/raw/main/images/web-port-forward.PNG alt></p><h3 id=reccmmendatoins>Reccmmendatoins</h3><p>For simple ssh access we make a command (or Gregor might have already done
this, I haven&rsquo;t reviewed his work yet)</p><pre><code>cms ssh config NAMES MANAGER [--laptop]
</code></pre><p>e.g.</p><pre><code> cms ssh config red00[1-2] red --laptop=anthony@anthony-ubuntu.local
</code></pre><p>We will probably turn <code>cms host tunnel create</code> into a command to expose an
arbirary cluster-internal service to the laptop (not just ssh). For example
accessing a web page running on a worker.</p><pre><code>cms host tunnel create NAMES SERVICE_PORTS EXTERNAL_START_PORT
</code></pre><p>e.g.</p><pre><code>cms host tunnel create red00[1-2] 80 8080
</code></pre><p>Now from laptop we can browse to <code>http://red.local:8080</code> and
<code>http://red.local:8081</code> to access the web pages on <code>red001:80</code> and <code>red002:80</code>
respectively.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-058d31f1ad9ef18980f31316da5cffc8>10 - Ubuntu on the Pi</h1><div class=lead>A collection of links and tutrials that halp making using Ubuntu on the Pi.</div><div class="card rounded p-2 td-post-card mb-4 mt-4" style=max-width:610px><img class=card-img-top src=/pi/tutorial/ubuntu/featured-image_hub225d8e28e0c8cb78ba75e0b37fb6163_234635_600x300_fill_catmullrom_smart1_2.png width=600 height=300><div class="card-body px-0 pt-2 pb-0"><p class=card-text>Upuntu Turorials</p></div></div><div class="pageinfo pageinfo-primary"><p>A collection of links and tutorials that halp making using Ubuntu on the Pi.</p><p><strong>Learning Objectives</strong></p><ul><li>Find tutorials and useful infpormation about PI&rsquo;s and Ubuntu.</li></ul><p><strong>Topics covered</strong></p><div class=toc><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#canonical-tutorials>Canonical Tutorials</a></li><li><a href=#initialization>Initialization</a></li><li><a href=#faq>FAQ</a><ul><li><a href=#dd-from-compressed-files>dd from compressed files</a></li><li><a href=#cloudint-reset>cloudint reset</a></li><li><a href=#k3s>k3s</a></li><li><a href=#k3sup-with-static-adresses>k3sup with static adresses</a></li><li><a href=#k9s>k9s</a></li></ul></li><li><a href=#general-ubuntu>general ubuntu</a></li></ul></nav></div></div><h2 id=introduction>Introduction</h2><p>Ubuntu is a real good alternative for an operating system on teh PI. The reason
is that at this time RaspberryOS is only supporting 32-bit, while Ubuntu
supports both 32 and 64 bit versions of their operating system. We recommend to
just install the 64 bit version.</p><h2 id=canonical-tutorials>Canonical Tutorials</h2><ul><li><p><a href=https://wiki.ubuntu.com/ARM/RaspberryPi>The very useful Wiki</a></p></li><li><p><a href="https://ubuntu.com/tutorials?q=pi">Ubuntu PI tutorials from Canonical</a></p><p>Currently this includes</p><ul><li><a href=https://ubuntu.com/tutorials/how-to-install-ubuntu-desktop-on-raspberry-pi-4#1-overview>How to install Ubuntu Desktop on Raspberry Pi 4</a></li><li>[How to create an Ubuntu Server SDcard for Raspberry Pi](How to create an Ubuntu Server SDcard for Raspberry Pi)</li><li><a href=https://ubuntu.com/tutorials/how-to-install-ubuntu-on-your-raspberry-pi#1-overview>How to install Ubuntu Server on your Raspberry Pi</a></li><li><a href=https://ubuntu.com/tutorials/how-to-kubernetes-cluster-on-raspberry-pi#1-overview>How to build a Raspberry Pi Kubernetes cluster using MicroK8s</a></li><li><a href=https://ubuntu.com/tutorials/how-to-install-ubuntu-core-on-raspberry-pi#1-overview>How to install Ubuntu Core on your Raspberry Pi</a></li><li><a href=https://ubuntu.com/tutorials/create-an-ubuntu-image-for-a-raspberry-pi-on-windows#1-overview>Create an Ubuntu image for a Raspberry Pi on Windows</a></li><li><a href=https://ubuntu.com/tutorials/create-an-ubuntu-image-for-a-raspberry-pi-on-macos#1-overview>Create an Ubuntu image for a Raspberry Pi on MacOS</a></li><li><a href=https://ubuntu.com/tutorials/create-an-ubuntu-image-for-a-raspberry-pi-on-ubuntu#1-overview>Create an Ubuntu image for a Raspberry Pi on Ubuntu</a></li><li><a href=https://ubuntu.com/tutorials/how-to-install-adguard-home-raspberry-pi#1-overview>How to use the AdGuard Home Ubuntu Appliance</a></li></ul></li></ul><h2 id=initialization>Initialization</h2><ul><li><a href=https://cloudinit.readthedocs.io/en/latest/>Clud init</a></li><li><a href=https://roboticsbackend.com/install-ubuntu-on-raspberry-pi-without-monitor/>Headless Setup via user-data</a><ul><li><a href=https://stackoverflow.com/questions/62930794/ubuntu-focal-headless-setup-on-raspberry-pi-4-cloud-init-wifi-initialisation-b>network</a></li><li><a href=https://askubuntu.com/questions/1302840/ubuntu-setup-user-data-ssh>user-data</a></li></ul></li></ul><h2 id=faq>FAQ</h2><h3 id=dd-from-compressed-files>dd from compressed files</h3><p>from: <a href=https://www.zdnet.com/article/hands-on-adventures-with-ubuntu-linux-on-the-raspberry-pi-4/>https://www.zdnet.com/article/hands-on-adventures-with-ubuntu-linux-on-the-raspberry-pi-4/</a></p><pre><code>xzcat ubuntu-20.10-preinstalled-desktop-arm64+raspi.img.xz | dd bs=4M of=/dev/sdX iflag=fullblock oflag=direct status=progress
</code></pre><p>xzcat uncompresses the download file and writes it to standard output, so we can pipe it to the dd command
dd is the Linux raw copy utility, which will actually write the data to the SD card
bs=4M tells dd to read/write the data in blocks of 4 Megabytes
of=/dev/sdX tells dd where to write the output; you need to replace the X with the device identifier for the SD card on your system; be very careful about this, because putting the wrong character here can have catastrophic consequences
iflag=fullblock tells dd to accumulate full blocks on the input before proceeding to the output
oflag=direct tells dd to use direct I/O operations for the data
status=progress tells dd to show a periodic summary of the data transfer</p><h3 id=cloudint-reset>cloudint reset</h3><ul><li><a href="https://www.raspberrypi.org/forums/viewtopic.php?t=255465">https://www.raspberrypi.org/forums/viewtopic.php?t=255465</a></li></ul><p>sudo cloud-init clean &ndash;logs &ndash;reboot</p><p>Will cause cloud-init to reset itself and re-run after rebooting the machine.
Note that this does not clean up everything that cloud-init did the first time
round (user creation, file-writing, etc.), so depending on the configuration it
may or may not work successfully the second time (though generally I&rsquo;ve found
it reasonably useful for testing). Currently, the only way to completely clean
the system is to re-image.</p><h3 id=k3s>k3s</h3><ul><li>good tutorial: <a href=https://mhausenblas.info/kube-rpi/>https://mhausenblas.info/kube-rpi/</a></li><li><a href=https://medium.com/@amadmalik/installing-kubernetes-on-raspberry-pi-k3s-and-docker-on-ubuntu-20-04-ef51e5e56>https://medium.com/@amadmalik/installing-kubernetes-on-raspberry-pi-k3s-and-docker-on-ubuntu-20-04-ef51e5e56</a></li></ul><h3 id=k3sup-with-static-adresses>k3sup with static adresses</h3><ul><li><p>Important read but we want to use k3s and not k3sup
<a href=https://medium.com/icetek/building-a-kubernetes-cluster-on-raspberry-pi-running-ubuntu-server-8fc4edb30963>https://medium.com/icetek/building-a-kubernetes-cluster-on-raspberry-pi-running-ubuntu-server-8fc4edb30963</a></p></li><li><p><a href=https://ma.ttias.be/deploying-highly-available-k3s-k3sup/>https://ma.ttias.be/deploying-highly-available-k3s-k3sup/</a></p></li></ul><h3 id=k9s>k9s</h3><p>some tool, nt sure if useful</p><ul><li><a href=https://github.com/derailed/k9s>https://github.com/derailed/k9s</a></li></ul><h2 id=general-ubuntu>general ubuntu</h2><ul><li>enable ssh <a href=https://pimylifeup.com/ubuntu-enable-ssh/>https://pimylifeup.com/ubuntu-enable-ssh/</a></li><li>NTP with chrony <a href=https://pimylifeup.com/using-ntp-on-linux-with-chrony/>https://pimylifeup.com/using-ntp-on-linux-with-chrony/</a></li><li>NTP <a href=https://pimylifeup.com/timedatectl-command/>https://pimylifeup.com/timedatectl-command/</a></li><li>2 factor auth for ssh <a href=https://pimylifeup.com/setup-2fa-ssh/>https://pimylifeup.com/setup-2fa-ssh/</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-8a03792772737c9fcda02ef45a778cc5>11 - Example Tutorial</h1><div class=lead>How to manage users on the pi cluster</div><div class="card rounded p-2 td-post-card mb-4 mt-4" style=max-width:610px><img class=card-img-top src=/pi/tutorial/usermanagement/featured-image_hu31ad1de8477c329f5412ff59acdd044d_22590_600x300_fill_catmullrom_smart1_2.png width=600 height=300><div class="card-body px-0 pt-2 pb-0"><p class=card-text>The Web Page.
<small class=text-muted><br>Photo: Gregor von Laszewski / CC-BY-CA</small></p></div></div><div class="pageinfo pageinfo-primary"><p>Abstract</p><p><strong>Learning Objectives</strong></p><ul><li>Learn how to &mldr;</li></ul><p><strong>Topics covered</strong></p><div class=toc><nav id=TableOfContents><ul><li><ul><li><a href=#add-user>Add User</a></li><li><a href=#change-user-password>Change User Password</a></li><li><a href=#add-user-to-sudoers>Add User to Sudoers</a></li><li><a href=#test-user>Test User</a></li><li><a href=#delete--user>Delete User</a></li></ul></li></ul></nav></div></div><h3 id=add-user>Add User</h3><p>On red only.</p><pre><code>pi@red:~ $ sudo add user bob
</code></pre><p>On multiple cluster machines.</p><p>Disabled and gecos are required to prevent
interactive questions.</p><pre><code>pi@red:~$ cms host ssh red,red00[1-2] \&quot;sudo adduser wendy --disabled-password --gecos ',' \&quot;
host ssh red,red00[1-2] &quot;sudo adduser wendy --disabled-password --gecos , &quot;
+--------+---------+--------------------------------------------------+
| host   | success | stdout                                           |
+--------+---------+--------------------------------------------------+
| red    | True    | Adding user `wendy' ...                          |
|        |         | Adding new group `wendy' (1001) ...              |
|        |         | Adding new user `wendy' (1001) with group        |
|        |         | `wendy' ...                                      |
|        |         | Creating home directory `/home/wendy' ...        |
|        |         | Copying files from `/etc/skel' ...               |
| red001 | True    | Adding user `wendy' ...                          |
|        |         | Adding new group `wendy' (1001) ...              |
|        |         | Adding new user `wendy' (1001) with group        |
|        |         | `wendy' ...                                      |
|        |         | Creating home directory `/home/wendy' ...        |
|        |         | Copying files from `/etc/skel' ...               |
| red002 | True    | Adding user `wendy' ...                          |
|        |         | Adding new group `wendy' (1002) ...              |
|        |         | Adding new user `wendy' (1002) with group        |
|        |         | `wendy' ...                                      |
|        |         | Creating home directory `/home/wendy' ...        |
|        |         | Copying files from `/etc/skel' ...               |
+--------+---------+--------------------------------------------------+
</code></pre><h3 id=change-user-password>Change User Password</h3><p>On red only.</p><pre><code>pi@red:~ $ sudo passwd bob
</code></pre><p>On multiple cluster machines.</p><pre><code>pi@red:~$ cms host ssh red,red00[1-2] \' echo -e \&quot;password\\npassword\&quot; \| sudo passwd wendy \'
host ssh red,red00[1-2] ' echo -e &quot;password\npassword&quot; | sudo passwd wendy '
+--------+---------+--------------------------------------------------+
| host   | success | stdout                                           |
+--------+---------+--------------------------------------------------+
| red    | True    | New password: Retype new password: Sorry,        |
|        |         | passwords do not match.                          |
|        |         | passwd: Authentication token manipulation error  |
|        |         | passwd: password unchanged                       |
| red001 | True    |                                                  |
| red002 | True    |                                                  |
+--------+---------+--------------------------------------------------+

</code></pre><p>However, it seems like this may not work on the local machine (red).</p><h3 id=add-user-to-sudoers>Add User to Sudoers</h3><p>On red only.</p><pre><code>pi@red:~ $ sudo adduser bob sudo
</code></pre><p>On multiple cluster machines.</p><pre><code>pi@red:~$ cms host ssh red,red00[1-2] \'sudo adduser wendy sudo \'
host ssh red,red00[1-2] 'sudo adduser wendy sudo '
+--------+---------+-----------------------------------------+
| host   | success | stdout                                  |
+--------+---------+-----------------------------------------+
| red    | True    | Adding user `wendy' to group `sudo' ... |
|        |         | Adding user wendy to group sudo         |
|        |         | Done.                                   |
| red001 | True    | Adding user `wendy' to group `sudo' ... |
|        |         | Adding user wendy to group sudo         |
|        |         | Done.                                   |
| red002 | True    | Adding user `wendy' to group `sudo' ... |
|        |         | Adding user wendy to group sudo         |
|        |         | Done.                                   |
+--------+---------+-----------------------------------------+

</code></pre><h3 id=test-user>Test User</h3><pre><code>pi@red:~ $ ssh red001

pi@red001:~$ su wendy
Password: 
To run a command as administrator (user &quot;root&quot;), use &quot;sudo &lt;command&gt;&quot;.
See &quot;man sudo_root&quot; for details.

wendy@red001:/home/ubuntu$ sudo echo hello
[sudo] password for wendy: 
hello
</code></pre><h3 id=delete--user>Delete User</h3><p>On red only.</p><p>-r removes the user&rsquo;s home folder too.</p><pre><code>pi@red:~ $ sudo userdel -r bob
</code></pre><p>On multiple cluster machines.</p><pre><code>pi@red:~$ cms host ssh red,red00[1-2] \'sudo userdel -r wendy \'
host ssh red,red00[1-2] 'sudo userdel -r wendy '
+--------+---------+--------------------------------------------------+
| host   | success | stdout                                           |
+--------+---------+--------------------------------------------------+
| red    | True    | userdel: wendy mail spool (/var/mail/wendy) not  |
|        |         | found                                            |
| red001 | True    |                                                  |
| red002 | True    |                                                  |
+--------+---------+--------------------------------------------------+
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-ceb51565fd88ed675bfb16975ffb3740>12 -</h1><p>##Introduction
Flask is a python web application framework which is easy to get started with & capable of handling complex applications. Brief details on Flask can be found <a href=%22https://pythonbasics.org/what-is-flask-python/%22>here</a>.</p><p>##Installation
Instructions in this tutorial are from the official Flask <a href=%22https://flask.palletsprojects.com/en/1.1.x/installation/%22>installation guide</a>. This tutorial assumes you have Python 3 available, but details on setup using Python 2 can be found inn the official guide.</p><p>To begin work with Flask, create a project directory and set up a virtual environment for dependencies:</p><pre><code>$ mkdir myproject
$ cd myproject
$ python3 -m venv venv
</code></pre><p>Now, start the virtual environment and install Flask:</p><pre><code>$ . venv/bin/activate 
$ pip install Flask
</code></pre><p>You are now ready to go!</p></div><div class=td-content style=page-break-before:always><h1 id=pg-c04d28bfcad1263d749a359404a04ae8>13 -</h1><h2 id=introduction>Introduction</h2><p>Instructions in this tutorial are directly from <a href=%22https://medium.com/analytics-vidhya/jupyter-lab-on-raspberry-pi-22876591b227%22>Jupyter Lab on Raspberry Pi</a>, which I have walked through and added in updates where necessary.</p><h2 id=installation>Installation</h2><p>Run the following commands to install Jupyter Lab:</p><pre><code>$ sudo apt-get update  
$ sudo apt-get install python3-pip  
$ sudo pip3 install setuptools  
$ sudo apt install libffi-dev  
$ sudo pip3 install cffi  
$ pip3 install jupyterlab
</code></pre><p>After completion, try starting a Jupyter Lab instance:</p><p><code>$ jupyter-lab</code></p><p>If you run into an <code>ImportError</code> for the <code>jupyter_core_paths</code> module, upgrade your <code>jupyter_core_paths</code> module using the following command:</p><p><code>$ pip3 install --upgrade jupyter_client</code></p><h2 id=jupyter-lab-as-a-service>Jupyter Lab as a Service</h2><p>Follow the steps in the <strong>Setup Jupyter lab as a service</strong> and <strong>Add password</strong> sections of <a href=%22https://medium.com/analytics-vidhya/jupyter-lab-on-raspberry-pi-22876591b227%22>Jupyter Lab on Raspberry Pi</a></p><h2 id=ssl-setup>SSL Setup</h2><p>From Jupyter Notebook Docs on <a href=%22https://jupyter-notebook.readthedocs.io/en/stable/public_server.html#using-ssl-for-encrypted-communication%22>SSL Setup</a></p><p>Create a self-signed certificate:</p><pre><code>$ openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout mykey.key -out mycert.pem
</code></pre><p>Set your notebook to run in a secure protocol mode using the certificate you made:</p><pre><code>$ jupyter notebook --certfile=mycert.pem --keyfile mykey.key
</code></pre><p>Open the <code>jupyter_notebook_config.py</code> and <code>jupyter_notebook_config.json</code> files:</p><pre><code>$ sudo nano /home/pi/.jupyter/jupyter_notebook_config.py   
$ sudo nano /home/pi/.jupyter/jupyter_notebook_config.json

</code></pre><p>Copy the password value from the .json file. In the .py file, scroll through and uncomment the following fields and add the following values. They should be in order. You can use the <code>$realpath filename.extension</code> command get absolute paths to your files in bash.</p><pre><code>c.NotebookApp.certfile = u'/absolute/path/to/your/certificate/mycert.pem'
c.NotebookApp.ip = '*'
c.NotebookApp.keyfile = u'/absolute/path/to/your/certificate/mykey.key'
c.NotebookApp.open_browser = False
c.NotebookApp.password = u'PASSWORD COPIED FROM .JSON FILE'
c.NotebookApp.port = 9999

</code></pre><h2 id=configure-firewall>Configure Firewall</h2></div><div class=td-content style=page-break-before:always><h1 id=pg-1a45a43a3ebb5eeedf69b9df992bf72b>14 -</h1><p>##Introduction</p><p>##Installation</p><p>##Setup a Basic NFS Server
To begin, install the required packages using the following command:</p><pre><code>$ sudo apt install nfs-kernel-server
</code></pre><p>Create a filesystem to export to:</p><pre><code>$ sudo mkdir -p /export/users

</code></pre><p>Mount the real directory to the export filesystem. In this case, we will use /home/pi:</p><pre><code>$ sudo mount --bind /home/pi /export/users
</code></pre><p>To preserve this between reboots, edit your filesystem&rsquo;s fstab file. This can be found in the pi directory:</p><pre><code>$ sudo nano /etc/fstab
</code></pre><p>Add the following line to the end of the file, separated by tabs:</p><pre><code>/home/users    /export/users   none    bind  0  0
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-da3d90228ab33c3a8e7cb7bc019b2693>15 -</h1><h2 id=introduction>Introduction</h2><p>Redis is an <strong><a href=%22https://medium.com/@denisanikin/what-an-in-memory-database-is-and-how-it-persists-data-efficiently-f43868cff4c1%22>In-Memory Database</a></strong> & key-value store often used for caching. It is known for its exceptionally fast read-write operations (100,000/second) in memory. It can be used as an alternative to <a href=%22https://github.com/cloudmesh/yamldb%22>YAMLDB</a> in our implementation.</p><h2 id=installation>Installation</h2><p>Installation & setup instructions are taken from the [Redis Quickstart][] webpage.
[Redis QuickStart]: &ldquo;<a href=https://redis.io/topics/quickstart%22>https://redis.io/topics/quickstart"</a></p><p>To install the latest available version of Redis, enter the following commands in your Pi terminal:</p><pre><code>wget http://download.redis.io/redis-stable.tar.gz
tar xvzf redis-stable.tar.gz
cd redis-stable
make
</code></pre><p>After these commands have finished executing, enter the following command to check if the build has worked correctly:</p><pre><code>$ make test
</code></pre><h2 id=setup--testing>Setup & Testing</h2><p>Set up PATH environment variables for the server and command line interface with the following commands:</p><pre><code>$ sudo cp src/redis-server /usr/local/bin/  
$ sudo cp src/redis-server /usr/local/bin/
</code></pre><p>Start an instance of the Redis server:</p><pre><code>$ redis-server
</code></pre><p>As a default this should run on port 6739. Send a command through the Redis command line interface to the running instance to make sure it is working properly. Enter the following:</p><pre><code>$ redis-cli ping
</code></pre><p>Expect the response <code>PONG</code></p><h2 id=brief-examples>Brief Examples</h2><p>An official introduction to Redis commands is given in Redis&rsquo;s <a href=%22https://redis.io/topics/data-types-intro%22>Introduction to Data Types</a> article.</p><p>Try out the following examples in Redis CLI&rsquo;s <em>interactive mode</em> by typing in <code>redis-cli</code> without any commands or arguments.</p><h3 id=databases>Databases</h3><p>Redis databases are referred to using integer indices (Ex. database &ldquo;0&rdquo;, database &ldquo;1&rdquo;, etc). By default, a Redis instance contains 16 databases, and is set to database 0 when first accessed by a client.</p><p>Use the <code>SELECT</code> command followed by the index of the database to switch between databases.</p><p>Try entering</p><p><code>$ SELECT 3</code></p><p>This will switch the current database to database 3.</p><p>Use the <code>FLUSHDB</code> to erase all key-value pairs from a database.</p><h3 id=keys>Keys</h3><p>Set and get key-value pairs in a Redis database using the <code>GET</code> and <code>SET</code> commands. Try the following example:</p><p><code>$ SET color blue</code></p><p>This should return <code>OK</code> to indicate the creation was successful. Now, enter:</p><p><code>$ GET color</code></p><p>This should return <code>blue</code></p><p>Now try:</p><p><code>$ FLUSHDB</code></p><p>followed by</p><p><code>$ GET color</code></p><p>The key-value pair should no longer be in the database, and you should see a return value of <code>(nil)</code></p></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Gregor von Laszewski" aria-label="Gregor von Laszewski"><a class=text-white target=_blank rel="noopener noreferrer" href=https://laszewski.github.io><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Cloudmesh GitHub" aria-label="Cloudmesh GitHub"><a class=text-white target=_blank rel="noopener noreferrer" href=https://github.com/cloudmesh><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Web Site GitHub" aria-label="Web Site GitHub"><a class=text-white target=_blank rel="noopener noreferrer" href=https://github.com/cloudmesh/pi><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Cloudmesh Community Slack" aria-label="Cloudmesh Community Slack"><a class=text-white target=_blank rel="noopener noreferrer" href=https://cloudmesh-community.slack.com><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel="noopener noreferrer" href=https://groups.google.com/g/piplanet><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2021 The Cloudmesh Projects, Gregor von Laszewski All Rights Reserved</small><p class=mt-2><a href=/pi/about/>About Cloudmesh Pi</a></p></div></div></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=/pi/js/main.min.ff304e9949717e3408e45c6399bef7e0834e330b2cbb0a5a5ac54227112a59c0.js integrity="sha256-/zBOmUlxfjQI5Fxjmb734INOMwssuwpaWsVCJxEqWcA=" crossorigin=anonymous></script></body></html>
---
date: 2021-02-07
title: "Interactive GUI using IPYWIDGET and Voila"
linkTitle: "Interactive GUI using IPYWIDGET and Voila"
draft: True
description: "This tutorial shows  how to dynamically control dashboard using a live Jupyter kernel and one or more input controls."
author: Gregor von Laszewski ([laszewski@gmail.com](mailto:laszewski@gmail.com)) [laszewski.github.io](https://laszewski.github.io)

resources:
- src: "**.{png,jpg}"
  title: "Image #:counter"
---

{{< imgproc image Fill "600x300" >}}
TODO: Caption for the image
{{< /imgproc >}}


{{% pageinfo %}}

Please describe what this tutorial is about. 

**Learning Objectives**

* Learn how to ...
  
**Topics covered**

{{% table_of_contents %}}

{{% /pageinfo %}}


## Introduction

Voila turns a Jupyter Notebook into an interactive document. It's important to note that interactive documents need to be deployed using Voila to be shared broadly, whereas static html documents generated by nbconvert that can be attached to emails or served from any st
andard web server.

## Steps to create interactive dashboard

* Create one Section, level-2 markdown header (##)
* On this section add some code that shows ipywidgets controls and tag the cell with body (same as any other content)
* Add one or multiple regular Jupyter-flex Sections (##)
* Create an Output ipywidget that holds the outputs for the dashboard
* Use the interact() or observe() functions from ipywidgets to update Output widget
* Tag a code cell that outputs the Output widget with body
* Run the notebook using voila

## Example

a simple example using ipywidgets to generate a random distribution and plot a histogram using matplotlib. The dashboard will contain 3 widgets to control the mean and standard deviation of the data and number of bins of the histogram.

```
import numpy as np
import ipywidgets as widgets
from IPython.display import clear_output, display

import matplotlib.pyplot as plt
from IPython.display import set_matplotlib_formats
%matplotlib inline
set_matplotlib_formats('svg')

np.random.seed(42)

```

Create a new section and change the size to 250.

```
size = 250

```

Create 3 ipython widgets: 2 integer inputs and 1 slider and tag the cell with body.

We use a VBox and we make the labels their own widget instead of using a description in order to make it look better in the final dashboard.

```
mu_label = widgets.Label(value="Mean:")
mu_var = widgets.BoundedIntText(value=100, min=10, max=300)
sigma_label = widgets.Label(value="Sigma:")
sigma_var = widgets.BoundedIntText(value=15, min=10, max=50)
bins_label = widgets.Label(value="Bins:")
bins_var = widgets.IntSlider(value=50, min=1, max=100, step=1)

widgets.VBox([mu_label, mu_var, sigma_label, sigma_var, bins_label, bins_var])
```

Create a new section, change the size to 750.

```
size=750
```

Create an Output widget object out that will hold the final plot.

```
out = widgets.Output()
```

We use the observe() function from ipywidgets to generate the data and create the plot inside the output widget.

```
    mu = mu_var.value
    sigma = sigma_var.value
    num_bins = bins_var.value

    with out:
        fig, ax = plt.subplots()

        # the histogram of the data
        x = mu + sigma * np.random.randn(437)
        n, bins, patches = ax.hist(x, num_bins, density=1)

        # add a 'best fit' line
        y = ((1 / (np.sqrt(2 * np.pi) * sigma)) * np.exp(-0.5 * (1 / sigma * (bins - mu))**2))
        ax.plot(bins, y, '--')
        
        ax.set_xlabel('X')
        ax.set_ylabel('Probability density')
        ax.set_title(f'Histogram with: mu={mu}, sigma={sigma}, bins={num_bins}')

        clear_output(wait=True)
        plt.show(fig)

mu_var.observe(on_value_change, names="value")
sigma_var.observe(on_value_change, names="value")
bins_var.observe(on_value_change, names="value")

```

We call the on_value_change() function once to create an initial plot.

Then we output the Output widget and tag that cell with body.

```
on_value_change(None)
out
```

Run voila using the flex template and point it to the notebook file

```
voila --template=flex mpl-histogram.ipynb
```

## References
[^Example]: Voila example, <https://jupyter-flex.extrapolations.dev/voila-widgets/>
